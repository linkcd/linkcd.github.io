<!DOCTYPE html>
<html lang=en>
<head>

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-T85N4CJ');</script>
<!-- End Google Tag Manager -->

	
    <meta charset="utf-8">
    
    <title>How to build an IoT connected car - Part 2: Data Analytics in the Cloud | feng.blog();</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="In Part 1, we have talked about the hardware&#x2F;software running on the edge (the car) for collecting data. Now we have the data, and how to gain some insights by doing data analytics? I have been u">
<meta property="og:type" content="article">
<meta property="og:title" content="How to build an IoT connected car - Part 2: Data Analytics in the Cloud">
<meta property="og:url" content="https://feng.lu/2020/09/22/How-to-build-an-IoT-connected-car-Part-2-Data-Analytics-in-the-Cloud/index.html">
<meta property="og:site_name" content="feng.blog();">
<meta property="og:description" content="In Part 1, we have talked about the hardware&#x2F;software running on the edge (the car) for collecting data. Now we have the data, and how to gain some insights by doing data analytics? I have been u">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://feng.lu/2020/09/22/How-to-build-an-IoT-connected-car-Part-2-Data-Analytics-in-the-Cloud/Thumbnail.png">
<meta property="article:published_time" content="2020-09-22T08:00:13.000Z">
<meta property="article:modified_time" content="2025-03-28T09:05:16.670Z">
<meta property="article:author" content="Feng Lu">
<meta property="article:tag" content="IoT">
<meta property="article:tag" content="Azure">
<meta property="article:tag" content="PowerBI">
<meta property="article:tag" content="Data Analytics">
<meta property="article:tag" content="Car">
<meta property="article:tag" content="Visualization">
<meta property="article:tag" content="Databricks">
<meta property="article:tag" content="Time Series Insight (TSI)">
<meta property="article:tag" content="Azure Data Explorer (ADX)">
<meta property="article:tag" content="Python">
<meta property="article:tag" content="Jupyter Notebook">
<meta property="article:tag" content="Grafana">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://feng.lu/2020/09/22/How-to-build-an-IoT-connected-car-Part-2-Data-Analytics-in-the-Cloud/Thumbnail.png">
    

    
        <link rel="alternate" href="/atom.xml" title="feng.blog();" type="application/atom+xml" />
    

    
        <link rel="icon" href="/images/favicon.png" />
    

    
<link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">

    
<link rel="stylesheet" href="/libs/open-sans/styles.css">

    
<link rel="stylesheet" href="/libs/source-code-pro/styles.css">


    
<link rel="stylesheet" href="/css/style.css">


    
<script src="/libs/jquery/2.1.3/jquery.min.js"></script>

    
    
        
<link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">

    
    
        
<link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css">

    
    
    


<meta name="generator" content="Hexo 7.3.0"></head>

<body>
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T85N4CJ"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

    <div id="container">
        <header id="header">
    <div id="header-main" class="header-inner">
        <div class="outer">
            <a href="/" id="logo">
                <i class="logo"></i>
                <span class="site-title">feng.blog();</span>
            </a>
            <nav id="main-nav">
                
                    <a class="main-nav-link" href="/.">Home</a>
                
                    <a class="main-nav-link" href="/archives">Archives</a>
                
            </nav>
            
                
                <nav id="sub-nav">
                    <div class="profile" id="profile-nav">
                        <a id="profile-anchor" href="javascript:;">
                            <img class="avatar" src="/images/avatar.jpg" />
                            <i class="fa fa-caret-down"></i>
                        </a>
                    </div>
                </nav>
            
            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Search" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>

<script src="/js/insight.js"></script>


</div>
        </div>
    </div>
    <div id="main-nav-mobile" class="header-sub header-inner">
        <table class="menu outer">
            <tr>
                
                    <td><a class="main-nav-link" href="/.">Home</a></td>
                
                    <td><a class="main-nav-link" href="/archives">Archives</a></td>
                
                <td>
                    
    <div class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Search" />
    </div>

                </td>
            </tr>
        </table>
    </div>
</header>

        <div class="outer">
            
                

<aside id="profile">
    <div class="inner profile-inner">
        <div class="base-info profile-block">
            <img id="avatar" src="/images/avatar.jpg" />
            <h2 id="name">Feng Lu</h2>
            <h3 id="title">Builder, Speaker, Architect and Technical Evangelist</h3>
            <span id="location"><i class="fa fa-map-marker"></i>Oslo Area, Norway</span>
        </div>
        <div class="article-info profile-block">
            <div class="article-info-block">
                39
                <span>posts</span>
            </div>
            <div class="article-info-block">
                129
                <span>tags</span>
            </div>
        </div>
        
        <div class="profile-block social-links">
            <table>
                <tr>
                    
                    
                    <td>
                        <a href="https://www.linkedin.com/in/linkcd" target="_blank" title="linkedin" class=tooltip>
                            <i class="fa fa-linkedin"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="https://github.com/linkcd" target="_blank" title="github" class=tooltip>
                            <i class="fa fa-github"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="/atom.xml" target="_blank" title="rss" class=tooltip>
                            <i class="fa fa-rss"></i>
                        </a>
                    </td>
                    
                </tr>
            </table>
        </div>
        
    </div>
</aside>

            
            <section id="main"><article id="post-How-to-build-an-IoT-connected-car-Part-2-Data-Analytics-in-the-Cloud" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 class="article-title" itemprop="name">
            How to build an IoT connected car - Part 2: Data Analytics in the Cloud
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2020/09/22/How-to-build-an-IoT-connected-car-Part-2-Data-Analytics-in-the-Cloud/">
            <time datetime="2020-09-22T08:00:13.000Z" itemprop="datePublished">2020-09-22</time>
        </a>
    </div>


                        
                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link-link" href="/tags/Azure/" rel="tag">Azure</a>, <a class="tag-link-link" href="/tags/Azure-Data-Explorer-ADX/" rel="tag">Azure Data Explorer (ADX)</a>, <a class="tag-link-link" href="/tags/Car/" rel="tag">Car</a>, <a class="tag-link-link" href="/tags/Data-Analytics/" rel="tag">Data Analytics</a>, <a class="tag-link-link" href="/tags/Databricks/" rel="tag">Databricks</a>, <a class="tag-link-link" href="/tags/Grafana/" rel="tag">Grafana</a>, <a class="tag-link-link" href="/tags/IoT/" rel="tag">IoT</a>, <a class="tag-link-link" href="/tags/Jupyter-Notebook/" rel="tag">Jupyter Notebook</a>, <a class="tag-link-link" href="/tags/PowerBI/" rel="tag">PowerBI</a>, <a class="tag-link-link" href="/tags/Python/" rel="tag">Python</a>, <a class="tag-link-link" href="/tags/Time-Series-Insight-TSI/" rel="tag">Time Series Insight (TSI)</a>, <a class="tag-link-link" href="/tags/Visualization/" rel="tag">Visualization</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <p>In <a href="/2020/09/15/How-to-build-an-IoT-connected-car-Part-1-On-the-Edge/" title="How to build an IoT connected car - Part 1: On the Edge">Part 1</a>, we have talked about the hardware&#x2F;software running on the edge (the car) for collecting data.</p>
<p>Now we have the data, and how to gain some insights by doing data analytics? I have been using the following products, and would like to share my quick thoughts</p>
<ul>
<li>Azure Time Series Insight (TSI)</li>
<li>Azure Databricks</li>
<li>Azure Data Explorer (ADX)</li>
<li>PowerBI</li>
<li>Grafana</li>
</ul>
<img src="/2020/09/22/How-to-build-an-IoT-connected-car-Part-2-Data-Analytics-in-the-Cloud/Thumbnail.png" class="" title="Thumbnail"> 

<span id="more"></span>

<p><em>Please note that I tested these products back to Feb&#x2F;March of 2019 and all the feedback were from that time point. I am sure all products were significate upgraded and improved since then, so you might wanna check them again with the lastest features.</em>  </p>
<h2 id="1-Azure-Time-Series-Insight-TSI"><a href="#1-Azure-Time-Series-Insight-TSI" class="headerlink" title="1. Azure Time Series Insight (TSI)"></a>1. Azure Time Series Insight (TSI)</h2><p><a target="_blank" rel="noopener" href="https://azure.microsoft.com/en-us/services/time-series-insights/">Azure Time Series Insight (TSI)</a> is an IoT analytics platform monitor, analyze, and visualize your industrial IoT data at scale. With native integration with Azure IoTHub or EventHub, it is easy to visualize and explore the IoT data such as from our connected car.</p>
<h3 id="1-1-Simple-data-exploring"><a href="#1-1-Simple-data-exploring" class="headerlink" title="1.1 Simple data exploring"></a>1.1 Simple data exploring</h3><p>You can easily explore data by putting time series data into one screen:</p>
<img src="/2020/09/22/How-to-build-an-IoT-connected-car-Part-2-Data-Analytics-in-the-Cloud/TSI%20analytics.png" class="" title="TSI analytics">
<p>(click to enlarge)<br>For example, you can identify the relationship between engine RPM and speed, and the increasing temperature of engine coolant. </p>
<h3 id="1-2-Metadata-Model-management"><a href="#1-2-Metadata-Model-management" class="headerlink" title="1.2 Metadata&#x2F;Model management"></a>1.2 Metadata&#x2F;Model management</h3><p>As TSI is built for handling IoT data, it has built-in functionality for managing metadata&#x2F;models of IoT data stream. This is a unique feature that only TSI offers, compares to other general-purpose analytics products that I tried. </p>
<p>In another word, in order to use TSI, you will have to setup the <a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/azure/time-series-insights/concepts-model-overview">following models</a>:</p>
<ul>
<li>Time Series Model instances</li>
<li>Time Series Model hierarchies</li>
<li>Time Series Model types</li>
</ul>
<img src="/2020/09/22/How-to-build-an-IoT-connected-car-Part-2-Data-Analytics-in-the-Cloud/TSI%20models.png" class="" title="TSI models">
<p>(source: Microsoft)</p>
<p>For our case, we can setup the models for representing the </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">Assets - ABC Taxi Company Carpool</span><br><span class="line">    ├── Car 1: Feng Toyota Auris</span><br><span class="line">    │   ├── GPS</span><br><span class="line">    │   │   └── FengsDevice_GPS</span><br><span class="line">    │   │       ├── GPS Speed</span><br><span class="line">    │   │       ├── Altitude</span><br><span class="line">    │   │       └── ...</span><br><span class="line">    │   └── OBD</span><br><span class="line">    │       └── FengsDevice_OBD</span><br><span class="line">    │           ├── RPM</span><br><span class="line">    │           ├── SPEED</span><br><span class="line">    │           ├── MAF</span><br><span class="line">    │           ├── ENGINE_LOAD</span><br><span class="line">    │           └── ...</span><br><span class="line">    │ </span><br><span class="line">    ├── Car 2: Thomas Two Engines Monster Truck</span><br><span class="line">    │   ├── GPS</span><br><span class="line">    │   │   └── TomsDevice_GPS</span><br><span class="line">    │   │       ├── GPS Speed</span><br><span class="line">    │   │       ├── Altitude</span><br><span class="line">    │   │       └── ...</span><br><span class="line">    │   └── OBD</span><br><span class="line">    │       ├── TomsDevice_OBD_Engine_1</span><br><span class="line">    │       │   ├── RPM</span><br><span class="line">    │       │   ├── SPEED</span><br><span class="line">    │       │   ├── MAF</span><br><span class="line">    │       │   ├── ENGINE_LOAD</span><br><span class="line">    │       │   └── ...</span><br><span class="line">    │       └── TomsDevice_OBD_Engine_2</span><br><span class="line">    │           ├── RPM</span><br><span class="line">    │           ├── SPEED</span><br><span class="line">    │           ├── MAF</span><br><span class="line">    │           ├── ENGINE_LOAD</span><br><span class="line">    │           └── ...</span><br><span class="line">    │ </span><br><span class="line">    └── Car 3: ...</span><br><span class="line">        └── ...</span><br></pre></td></tr></table></figure>

<p>For our case, these model definitions can be found at <a target="_blank" rel="noopener" href="https://github.com/linkcd/IoTCar/tree/master/modules/OBDModule/TSI%20config">here</a>.</p>
<img src="/2020/09/22/How-to-build-an-IoT-connected-car-Part-2-Data-Analytics-in-the-Cloud/TSI%20models%20in%20demo.png" class="" title="TSI models in demo">


<h3 id="1-3-Summary-of-TSI-experience"><a href="#1-3-Summary-of-TSI-experience" class="headerlink" title="1.3 Summary of TSI experience"></a>1.3 Summary of TSI experience</h3><p><strong>Pro:</strong></p>
<ul>
<li>Very nice user interface with animation, smoothly zoom in&#x2F;out</li>
<li>Built-in support of data module&#x2F;metadata</li>
<li>Supporting IoT data in scale (although I only tested with a small dataset)</li>
<li>Data can be exported to parquet files, which is optimized for time-series data</li>
</ul>
<p><strong>Con:</strong></p>
<ul>
<li>Limited analytic possibility, cannot run customized query in UI</li>
<li>Does not support map</li>
<li>Data model contextualization is done only via TSI API, not in parquet file (which is raw data) </li>
<li>Exported parquet file is somewhat messy (see more details in DataBricks section)</li>
</ul>
<h2 id="2-Azure-Databricks"><a href="#2-Azure-Databricks" class="headerlink" title="2. Azure Databricks"></a>2. Azure Databricks</h2><p>It was nice to visualize the time series data in TSI, but I would like to play more with the dataset, such as calculating the fuel consumption vs. speed for example. I would like to use python and jupyter notebook. Therefore I continue the work with <a target="_blank" rel="noopener" href="https://azure.microsoft.com/en-us/services/databricks/">Azure Databrick</a>.</p>
<h3 id="2-1-Simple-plot-of-Speed-vs-RPM"><a href="#2-1-Simple-plot-of-Speed-vs-RPM" class="headerlink" title="2.1 Simple plot of Speed vs RPM"></a>2.1 Simple plot of Speed vs RPM</h3><img src="/2020/09/22/How-to-build-an-IoT-connected-car-Part-2-Data-Analytics-in-the-Cloud/speed%20vs%20rpm.png" class="" title="Speed vs RPM">

<h3 id="2-2-Calculate-the-fuel-consumption-and-eco-driving-zone"><a href="#2-2-Calculate-the-fuel-consumption-and-eco-driving-zone" class="headerlink" title="2.2 Calculate the fuel consumption and eco-driving zone"></a>2.2 Calculate the fuel consumption and eco-driving zone</h3><p>By using MFA and speed, it is possible to calculate the fuel consumption, as explained in <a target="_blank" rel="noopener" href="https://www.windmill.co.uk/fuel.html">https://www.windmill.co.uk/fuel.html</a> and <a target="_blank" rel="noopener" href="https://www.wikihow.com/Convert-MPG-to-Liters-per-100km">https://www.wikihow.com/Convert-MPG-to-Liters-per-100km</a>. </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Adding MPG column</span></span><br><span class="line"><span class="comment"># MPG=Speed(Km/h)*7.718/MAF</span></span><br><span class="line">dfwithMPG = df.withColumn(<span class="string">&quot;MPG&quot;</span>,df.series_SPEED_double/df.series_MAF_double*<span class="number">7.718</span>).select(<span class="string">&quot;timestamp&quot;</span>, <span class="string">&quot;series_SPEED_double&quot;</span>, <span class="string">&quot;series_RPM_double&quot;</span>, <span class="string">&quot;MPG&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Then convert from MPG to L/100km, adding Consumption column, using US galoons</span></span><br><span class="line">l/100km = <span class="number">282.48</span>/MPG (imperial gallons) <span class="keyword">or</span>  l/100km = <span class="number">235.21</span>/MPG (US gallons)</span><br><span class="line">dfwithConsumption = dfwithMPG.withColumn(<span class="string">&quot;Consumption&quot;</span>,<span class="number">235.21</span>/dfwithMPG.MPG).select(<span class="string">&quot;timestamp&quot;</span>, <span class="string">&quot;series_SPEED_double&quot;</span>, <span class="string">&quot;series_RPM_double&quot;</span>, <span class="string">&quot;MPG&quot;</span>, <span class="string">&quot;Consumption&quot;</span>)</span><br></pre></td></tr></table></figure>
<img src="/2020/09/22/How-to-build-an-IoT-connected-car-Part-2-Data-Analytics-in-the-Cloud/fuel%20consumption.jpg" class="" title="Fuel Consumption">
<p>(Picture: Oversimplified calculation of eco-driving zone)</p>
<h3 id="2-3-Issue-of-TSI-generated-parquet-files"><a href="#2-3-Issue-of-TSI-generated-parquet-files" class="headerlink" title="2.3 Issue of TSI generated parquet files"></a>2.3 Issue of TSI generated parquet files</h3><p>If we directly use the TSI parquet files as input for the databricks, we will encounter an error message <strong>“Found duplicate column(s) in data schema: “series_speed_double”</strong>.</p>
<p>This is because both GPS and OBD modules are reporting speed, but with different case <strong>“Speed”</strong> and <strong>“SPEED”</strong>.</p>
<img src="/2020/09/22/How-to-build-an-IoT-connected-car-Part-2-Data-Analytics-in-the-Cloud/duplicate%20columns.png" class="" title="Duplicate columns for speed">

<p>TSI is fine with it, as the asset model&#x2F;metadata helps, but in Databrick there is no data contextualization - all data fields are flattened out, therefore it is quite often encountering this type of issue.</p>
<p>As a workaround, we can set spark.sql.caseSensitive as true </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sqlContext.sql(<span class="string">&quot;set spark.sql.caseSensitive=true&quot;</span>)</span><br><span class="line">df = sqlContext.read.parquet(file_path).select(<span class="string">&quot;column1&quot;</span>, <span class="string">&quot;column2&quot;</span> )</span><br></pre></td></tr></table></figure>
<h3 id="2-4-Summary-of-Databricks-experience"><a href="#2-4-Summary-of-Databricks-experience" class="headerlink" title="2.4 Summary of Databricks experience"></a>2.4 Summary of Databricks experience</h3><p><strong>Pro:</strong></p>
<ul>
<li>The standard tool&#x2F;eco-system for data analytics, can do almost anything</li>
<li>Rich and powerful libraries</li>
</ul>
<p><strong>Con:</strong></p>
<ul>
<li>Not for ordinary business users who do not work with python&#x2F;programming</li>
<li>Some visualization such as map and animation requires extra work</li>
<li>Tried PowerBI to databricks (spark), did not manage to make it work at that time (beta version) </li>
<li>No builtin data contextualization support, take the input as it is, which is an issue with TSI parquet files</li>
</ul>
<h2 id="3-Azure-Data-Explorer-ADX"><a href="#3-Azure-Data-Explorer-ADX" class="headerlink" title="3. Azure Data Explorer (ADX)"></a>3. Azure Data Explorer (ADX)</h2><p>After tried the a-bit-too-simple TSI and a-bit-too-hardcore Databrick, I was looking for a better-balanced product between them. Therefore I started exploring <a target="_blank" rel="noopener" href="https://azure.microsoft.com/en-us/services/data-explorer/">Azure Data Explorer (ADX)</a>.</p>
<h3 id="3-1-Setup-database-and-ingestion-mapping"><a href="#3-1-Setup-database-and-ingestion-mapping" class="headerlink" title="3.1 Setup database and ingestion mapping"></a>3.1 Setup database and ingestion mapping</h3><p>Long story short, I created an ADX cluster and a database for IoT Car data, created 2 tables:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.create table OBDTable (timestamp: datetime, deviceId: string, speed: real, rpm: real, run_time: real, absolute_load: real, short_fuel_trim_1: real, long_fuel_trim_1: real, timing_advance: real, intake_pressure: real, intake_temp: real, throttle_pos: real, relative_throttle_pos: real, oil_temp: real, maf: real, coolant_temp: real, engine_load: real) </span><br><span class="line"></span><br><span class="line">.create table GPSTable (timestamp: datetime, deviceId: string, gps_speed: real, altitude: real, longitude: string, latitude: string) </span><br></pre></td></tr></table></figure>

<p>And create mappings as below:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;Name&quot;</span><span class="punctuation">:</span> GPSMapping<span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;Kind&quot;</span><span class="punctuation">:</span> Json<span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;Mapping&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span><span class="attr">&quot;column&quot;</span><span class="punctuation">:</span><span class="string">&quot;timestamp&quot;</span><span class="punctuation">,</span><span class="attr">&quot;path&quot;</span><span class="punctuation">:</span><span class="string">&quot;$.timestamp&quot;</span><span class="punctuation">,</span><span class="attr">&quot;datatype&quot;</span><span class="punctuation">:</span><span class="string">&quot;datetime&quot;</span><span class="punctuation">,</span><span class="attr">&quot;transform&quot;</span><span class="punctuation">:</span><span class="string">&quot;None&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="punctuation">&#123;</span><span class="attr">&quot;column&quot;</span><span class="punctuation">:</span><span class="string">&quot;deviceId&quot;</span><span class="punctuation">,</span><span class="attr">&quot;path&quot;</span><span class="punctuation">:</span><span class="string">&quot;$.deviceId&quot;</span><span class="punctuation">,</span><span class="attr">&quot;datatype&quot;</span><span class="punctuation">:</span><span class="string">&quot;string&quot;</span><span class="punctuation">,</span><span class="attr">&quot;transform&quot;</span><span class="punctuation">:</span><span class="string">&quot;None&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="punctuation">&#123;</span><span class="attr">&quot;column&quot;</span><span class="punctuation">:</span><span class="string">&quot;gps_speed&quot;</span><span class="punctuation">,</span><span class="attr">&quot;path&quot;</span><span class="punctuation">:</span><span class="string">&quot;$.series[0].gps_speed&quot;</span><span class="punctuation">,</span><span class="attr">&quot;datatype&quot;</span><span class="punctuation">:</span><span class="string">&quot;double&quot;</span><span class="punctuation">,</span><span class="attr">&quot;transform&quot;</span><span class="punctuation">:</span><span class="string">&quot;None&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="punctuation">&#123;</span><span class="attr">&quot;column&quot;</span><span class="punctuation">:</span><span class="string">&quot;altitude&quot;</span><span class="punctuation">,</span><span class="attr">&quot;path&quot;</span><span class="punctuation">:</span><span class="string">&quot;$.series[0].altitude&quot;</span><span class="punctuation">,</span><span class="attr">&quot;datatype&quot;</span><span class="punctuation">:</span><span class="string">&quot;double&quot;</span><span class="punctuation">,</span><span class="attr">&quot;transform&quot;</span><span class="punctuation">:</span><span class="string">&quot;None&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="punctuation">&#123;</span><span class="attr">&quot;column&quot;</span><span class="punctuation">:</span><span class="string">&quot;longitude&quot;</span><span class="punctuation">,</span><span class="attr">&quot;path&quot;</span><span class="punctuation">:</span><span class="string">&quot;$.series[0].longitude&quot;</span><span class="punctuation">,</span><span class="attr">&quot;datatype&quot;</span><span class="punctuation">:</span><span class="string">&quot;string&quot;</span><span class="punctuation">,</span><span class="attr">&quot;transform&quot;</span><span class="punctuation">:</span><span class="string">&quot;None&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="punctuation">&#123;</span><span class="attr">&quot;column&quot;</span><span class="punctuation">:</span><span class="string">&quot;latitude&quot;</span><span class="punctuation">,</span><span class="attr">&quot;path&quot;</span><span class="punctuation">:</span><span class="string">&quot;$.series[0].latitude&quot;</span><span class="punctuation">,</span><span class="attr">&quot;datatype&quot;</span><span class="punctuation">:</span><span class="string">&quot;string&quot;</span><span class="punctuation">,</span><span class="attr">&quot;transform&quot;</span><span class="punctuation">:</span><span class="string">&quot;None&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;LastUpdatedOn&quot;</span><span class="punctuation">:</span> <span class="number">2019</span><span class="number">-02</span><span class="number">-27</span>T19<span class="punctuation">:</span><span class="number">25</span><span class="punctuation">:</span><span class="number">47.889932</span>Z<span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;Database&quot;</span><span class="punctuation">:</span> iotcardb<span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;Table&quot;</span><span class="punctuation">:</span> GPSTable<span class="punctuation">,</span></span><br><span class="line"></span><br><span class="line"><span class="attr">&quot;Name&quot;</span><span class="punctuation">:</span> OBDMapping<span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;Kind&quot;</span><span class="punctuation">:</span> Json<span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;Mapping&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span><span class="attr">&quot;column&quot;</span><span class="punctuation">:</span><span class="string">&quot;timestamp&quot;</span><span class="punctuation">,</span><span class="attr">&quot;path&quot;</span><span class="punctuation">:</span><span class="string">&quot;$.timestamp&quot;</span><span class="punctuation">,</span><span class="attr">&quot;datatype&quot;</span><span class="punctuation">:</span><span class="string">&quot;datetime&quot;</span><span class="punctuation">,</span><span class="attr">&quot;transform&quot;</span><span class="punctuation">:</span><span class="string">&quot;None&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="punctuation">&#123;</span><span class="attr">&quot;column&quot;</span><span class="punctuation">:</span><span class="string">&quot;deviceId&quot;</span><span class="punctuation">,</span><span class="attr">&quot;path&quot;</span><span class="punctuation">:</span><span class="string">&quot;$.deviceId&quot;</span><span class="punctuation">,</span><span class="attr">&quot;datatype&quot;</span><span class="punctuation">:</span><span class="string">&quot;string&quot;</span><span class="punctuation">,</span><span class="attr">&quot;transform&quot;</span><span class="punctuation">:</span><span class="string">&quot;None&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="punctuation">&#123;</span><span class="attr">&quot;column&quot;</span><span class="punctuation">:</span><span class="string">&quot;speed&quot;</span><span class="punctuation">,</span><span class="attr">&quot;path&quot;</span><span class="punctuation">:</span><span class="string">&quot;$.series[0].SPEED&quot;</span><span class="punctuation">,</span><span class="attr">&quot;datatype&quot;</span><span class="punctuation">:</span><span class="string">&quot;double&quot;</span><span class="punctuation">,</span><span class="attr">&quot;transform&quot;</span><span class="punctuation">:</span><span class="string">&quot;None&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="punctuation">&#123;</span><span class="attr">&quot;column&quot;</span><span class="punctuation">:</span><span class="string">&quot;rpm&quot;</span><span class="punctuation">,</span><span class="attr">&quot;path&quot;</span><span class="punctuation">:</span><span class="string">&quot;$.series[0].RPM&quot;</span><span class="punctuation">,</span><span class="attr">&quot;datatype&quot;</span><span class="punctuation">:</span><span class="string">&quot;double&quot;</span><span class="punctuation">,</span><span class="attr">&quot;transform&quot;</span><span class="punctuation">:</span><span class="string">&quot;None&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="punctuation">&#123;</span><span class="attr">&quot;column&quot;</span><span class="punctuation">:</span><span class="string">&quot;run_time&quot;</span><span class="punctuation">,</span><span class="attr">&quot;path&quot;</span><span class="punctuation">:</span><span class="string">&quot;$.series[0].RUN_TIME&quot;</span><span class="punctuation">,</span><span class="attr">&quot;datatype&quot;</span><span class="punctuation">:</span><span class="string">&quot;double&quot;</span><span class="punctuation">,</span><span class="attr">&quot;transform&quot;</span><span class="punctuation">:</span><span class="string">&quot;None&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="punctuation">&#123;</span><span class="attr">&quot;column&quot;</span><span class="punctuation">:</span><span class="string">&quot;absolute_load&quot;</span><span class="punctuation">,</span><span class="attr">&quot;path&quot;</span><span class="punctuation">:</span><span class="string">&quot;$.series[0].ABSOLUTE_LOAD&quot;</span><span class="punctuation">,</span><span class="attr">&quot;datatype&quot;</span><span class="punctuation">:</span><span class="string">&quot;double&quot;</span><span class="punctuation">,</span><span class="attr">&quot;transform&quot;</span><span class="punctuation">:</span><span class="string">&quot;None&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="punctuation">&#123;</span><span class="attr">&quot;column&quot;</span><span class="punctuation">:</span><span class="string">&quot;short_fuel_trim_1&quot;</span><span class="punctuation">,</span><span class="attr">&quot;path&quot;</span><span class="punctuation">:</span><span class="string">&quot;$.series[0].SHORT_FUEL_TRIM_1&quot;</span><span class="punctuation">,</span><span class="attr">&quot;datatype&quot;</span><span class="punctuation">:</span><span class="string">&quot;double&quot;</span><span class="punctuation">,</span><span class="attr">&quot;transform&quot;</span><span class="punctuation">:</span><span class="string">&quot;None&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="punctuation">&#123;</span><span class="attr">&quot;column&quot;</span><span class="punctuation">:</span><span class="string">&quot;long_fuel_trim_1&quot;</span><span class="punctuation">,</span><span class="attr">&quot;path&quot;</span><span class="punctuation">:</span><span class="string">&quot;$.series[0].LONG_FUEL_TRIM_1&quot;</span><span class="punctuation">,</span><span class="attr">&quot;datatype&quot;</span><span class="punctuation">:</span><span class="string">&quot;double&quot;</span><span class="punctuation">,</span><span class="attr">&quot;transform&quot;</span><span class="punctuation">:</span><span class="string">&quot;None&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="punctuation">&#123;</span><span class="attr">&quot;column&quot;</span><span class="punctuation">:</span><span class="string">&quot;timing_advance&quot;</span><span class="punctuation">,</span><span class="attr">&quot;path&quot;</span><span class="punctuation">:</span><span class="string">&quot;$.series[0].TIMING_ADVANCE&quot;</span><span class="punctuation">,</span><span class="attr">&quot;datatype&quot;</span><span class="punctuation">:</span><span class="string">&quot;double&quot;</span><span class="punctuation">,</span><span class="attr">&quot;transform&quot;</span><span class="punctuation">:</span><span class="string">&quot;None&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="punctuation">&#123;</span><span class="attr">&quot;column&quot;</span><span class="punctuation">:</span><span class="string">&quot;intake_pressure&quot;</span><span class="punctuation">,</span><span class="attr">&quot;path&quot;</span><span class="punctuation">:</span><span class="string">&quot;$.series[0].INTAKE_PRESSURE&quot;</span><span class="punctuation">,</span><span class="attr">&quot;datatype&quot;</span><span class="punctuation">:</span><span class="string">&quot;double&quot;</span><span class="punctuation">,</span><span class="attr">&quot;transform&quot;</span><span class="punctuation">:</span><span class="string">&quot;None&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="punctuation">&#123;</span><span class="attr">&quot;column&quot;</span><span class="punctuation">:</span><span class="string">&quot;intake_temp&quot;</span><span class="punctuation">,</span><span class="attr">&quot;path&quot;</span><span class="punctuation">:</span><span class="string">&quot;$.series[0].INTAKE_TEMP&quot;</span><span class="punctuation">,</span><span class="attr">&quot;datatype&quot;</span><span class="punctuation">:</span><span class="string">&quot;double&quot;</span><span class="punctuation">,</span><span class="attr">&quot;transform&quot;</span><span class="punctuation">:</span><span class="string">&quot;None&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="punctuation">&#123;</span><span class="attr">&quot;column&quot;</span><span class="punctuation">:</span><span class="string">&quot;throttle_pos&quot;</span><span class="punctuation">,</span><span class="attr">&quot;path&quot;</span><span class="punctuation">:</span><span class="string">&quot;$.series[0].THROTTLE_POS&quot;</span><span class="punctuation">,</span><span class="attr">&quot;datatype&quot;</span><span class="punctuation">:</span><span class="string">&quot;double&quot;</span><span class="punctuation">,</span><span class="attr">&quot;transform&quot;</span><span class="punctuation">:</span><span class="string">&quot;None&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="punctuation">&#123;</span><span class="attr">&quot;column&quot;</span><span class="punctuation">:</span><span class="string">&quot;relative_throttle_pos&quot;</span><span class="punctuation">,</span><span class="attr">&quot;path&quot;</span><span class="punctuation">:</span><span class="string">&quot;$.series[0].RELATIVE_THROTTLE_POS&quot;</span><span class="punctuation">,</span><span class="attr">&quot;datatype&quot;</span><span class="punctuation">:</span><span class="string">&quot;double&quot;</span><span class="punctuation">,</span><span class="attr">&quot;transform&quot;</span><span class="punctuation">:</span><span class="string">&quot;None&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="punctuation">&#123;</span><span class="attr">&quot;column&quot;</span><span class="punctuation">:</span><span class="string">&quot;oil_temp&quot;</span><span class="punctuation">,</span><span class="attr">&quot;path&quot;</span><span class="punctuation">:</span><span class="string">&quot;$.series[0].OIL_TEMP&quot;</span><span class="punctuation">,</span><span class="attr">&quot;datatype&quot;</span><span class="punctuation">:</span><span class="string">&quot;double&quot;</span><span class="punctuation">,</span><span class="attr">&quot;transform&quot;</span><span class="punctuation">:</span><span class="string">&quot;None&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="punctuation">&#123;</span><span class="attr">&quot;column&quot;</span><span class="punctuation">:</span><span class="string">&quot;maf&quot;</span><span class="punctuation">,</span><span class="attr">&quot;path&quot;</span><span class="punctuation">:</span><span class="string">&quot;$.series[0].MAF&quot;</span><span class="punctuation">,</span><span class="attr">&quot;datatype&quot;</span><span class="punctuation">:</span><span class="string">&quot;double&quot;</span><span class="punctuation">,</span><span class="attr">&quot;transform&quot;</span><span class="punctuation">:</span><span class="string">&quot;None&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="punctuation">&#123;</span><span class="attr">&quot;column&quot;</span><span class="punctuation">:</span><span class="string">&quot;coolant_temp&quot;</span><span class="punctuation">,</span><span class="attr">&quot;path&quot;</span><span class="punctuation">:</span><span class="string">&quot;$.series[0].COOLANT_TEMP&quot;</span><span class="punctuation">,</span><span class="attr">&quot;datatype&quot;</span><span class="punctuation">:</span><span class="string">&quot;double&quot;</span><span class="punctuation">,</span><span class="attr">&quot;transform&quot;</span><span class="punctuation">:</span><span class="string">&quot;None&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="punctuation">&#123;</span><span class="attr">&quot;column&quot;</span><span class="punctuation">:</span><span class="string">&quot;engine_load&quot;</span><span class="punctuation">,</span><span class="attr">&quot;path&quot;</span><span class="punctuation">:</span><span class="string">&quot;$.series[0].ENGINE_LOAD&quot;</span><span class="punctuation">,</span><span class="attr">&quot;datatype&quot;</span><span class="punctuation">:</span><span class="string">&quot;double&quot;</span><span class="punctuation">,</span><span class="attr">&quot;transform&quot;</span><span class="punctuation">:</span><span class="string">&quot;None&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;LastUpdatedOn&quot;</span><span class="punctuation">:</span> <span class="number">2019</span><span class="number">-02</span><span class="number">-27</span>T19<span class="punctuation">:</span><span class="number">17</span><span class="punctuation">:</span><span class="number">24.3220181</span>Z<span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;Database&quot;</span><span class="punctuation">:</span> iotcardb<span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;Table&quot;</span><span class="punctuation">:</span> OBDTable<span class="punctuation">,</span></span><br></pre></td></tr></table></figure>

<h3 id="3-2-Data-analytics-by-using-kusto-query-language"><a href="#3-2-Data-analytics-by-using-kusto-query-language" class="headerlink" title="3.2 Data analytics by using kusto query language"></a>3.2 Data analytics by using kusto query language</h3><p>Now we are ready to query by using powerful <a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/azure/data-explorer/kusto/query/">kusto query language</a>, especially the <a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/azure/data-explorer/time-series-analysis">timeseries related analytics</a>.</p>
<h4 id="3-2-1-Average-GPS-speed-aggregated-by-every-20-seconds"><a href="#3-2-1-Average-GPS-speed-aggregated-by-every-20-seconds" class="headerlink" title="3.2.1 Average GPS speed aggregated by every 20 seconds"></a>3.2.1 Average GPS speed aggregated by every 20 seconds</h4><p>Simple data aggregation</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">//avg gps speed every 20s</span><br><span class="line"><span class="built_in">let</span> min_t = datetime(2019-03-06 12:30:00); //UTC</span><br><span class="line"><span class="built_in">let</span> max_t = datetime(2019-03-06 13:00:00); //UTC</span><br><span class="line">GPSTable</span><br><span class="line">| <span class="built_in">where</span> timestamp between (min_t .. max_t)</span><br><span class="line">| summarize avg(gps_speed) by bin(timestamp, 20s)</span><br><span class="line">| render timechart </span><br></pre></td></tr></table></figure>
<img src="/2020/09/22/How-to-build-an-IoT-connected-car-Part-2-Data-Analytics-in-the-Cloud/adx%20average%20gps%20speed.png" class="" title="ADX average GPS speed">

<h4 id="3-2-2-Join-2-tables-Show-obd-speed-gps-speed-and-avg-MAF"><a href="#3-2-2-Join-2-tables-Show-obd-speed-gps-speed-and-avg-MAF" class="headerlink" title="3.2.2 Join 2 tables, Show obd speed, gps speed and avg MAF"></a>3.2.2 Join 2 tables, Show obd speed, gps speed and avg MAF</h4><p>Inner join two tables and apply aggregation</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">//join 2 tables, show obd speed, gps speed and avg maf </span><br><span class="line"><span class="built_in">let</span> min_t = datetime(2019-03-06 12:30:00); //UTC</span><br><span class="line"><span class="built_in">let</span> max_t = datetime(2019-03-06 13:00:00); //UTC</span><br><span class="line">GPSTable</span><br><span class="line">| <span class="built_in">where</span> timestamp between (min_t .. max_t)</span><br><span class="line">| summarize avg(gps_speed) by bin(timestamp, 20s)</span><br><span class="line">| <span class="built_in">join</span> kind=inner</span><br><span class="line">(OBDTable </span><br><span class="line">| <span class="built_in">where</span> timestamp between (min_t .. max_t)</span><br><span class="line">| summarize avg(speed), avg(maf) by bin(timestamp, 20s))</span><br><span class="line">on timestamp </span><br><span class="line">| project timestamp, avg_gps_speed, avg_speed, avg_maf </span><br><span class="line">| render timechart</span><br></pre></td></tr></table></figure>
<img src="/2020/09/22/How-to-build-an-IoT-connected-car-Part-2-Data-Analytics-in-the-Cloud/ADX%20join%202%20tables.png" class="" title="ADX join 2 tables">

<h4 id="3-2-3-Applies-two-segments-linear-regression-on-engine-load"><a href="#3-2-3-Applies-two-segments-linear-regression-on-engine-load" class="headerlink" title="3.2.3 Applies two segments linear regression on engine_load"></a>3.2.3 Applies two segments linear regression on engine_load</h4><p>Apply two segments linear regression on engine load, see the document <a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/azure/kusto/query/series-fit-2lines-dynamicfunction">here</a>.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//Applies two segments linear regression on engine_load. </span><br><span class="line"><span class="built_in">let</span> min_t = datetime(2019-03-06 12:40:55); //UTC</span><br><span class="line"><span class="built_in">let</span> max_t = datetime(2019-03-06 12:57:20); //UTC</span><br><span class="line">OBDTable</span><br><span class="line">| <span class="built_in">where</span> coolant_temp &gt; 0</span><br><span class="line">| make-series engine_load_targetAvg = avg(engine_load) default = 0 on timestamp <span class="keyword">in</span> range(min_t, max_t, 5s)</span><br><span class="line">| extend LineFit=series_fit_line_dynamic(engine_load_targetAvg).line_fit, LineFit2=series_fit_2lines_dynamic(engine_load_targetAvg).line_fit</span><br><span class="line">| project timestamp, engine_load_targetAvg, LineFit, LineFit2 </span><br><span class="line">| render timechart</span><br></pre></td></tr></table></figure>
<img src="/2020/09/22/How-to-build-an-IoT-connected-car-Part-2-Data-Analytics-in-the-Cloud/adx%20two%20segments%20linear%20regression%20on%20engine%20load.png" class="" title="Applies two segments linear regression on engine_load">

<h3 id="3-3-Summary-of-ADX-experience"><a href="#3-3-Summary-of-ADX-experience" class="headerlink" title="3.3 Summary of ADX experience"></a>3.3 Summary of ADX experience</h3><p>Pro:</p>
<ul>
<li>Easy and powerful <a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/azure/data-explorer/kusto/query/">kusto query language</a>, good balance between capacity and user-friendly query.</li>
<li>Powerful and proven data computing capacity (the same technology that powers Azure log) </li>
<li>Contextualization in storage (table and columns)</li>
<li>Works well with PowerBI (see PowerBI section)</li>
</ul>
<p>Con:</p>
<ul>
<li>Cannot replace the “real” big data products </li>
<li>It has its own <a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/azure/kusto/concepts/querylimits">query limits</a></li>
<li>Missing some visualization such as map and animation</li>
</ul>
<h2 id="4-PowerBI"><a href="#4-PowerBI" class="headerlink" title="4. PowerBI"></a>4. PowerBI</h2><p>So far I have tried several products for analytics, but none of them have great built-in visualization features, especially on map support.</p>
<p>PowerBI is a popular tool for data visualization, but it does not support big data analytics. However, by combining PowerBI and ADX, the job is easier.</p>
<h3 id="4-1-Let-ADX-to-handle-the-computing-part"><a href="#4-1-Let-ADX-to-handle-the-computing-part" class="headerlink" title="4.1 Let ADX to handle the computing part"></a>4.1 Let ADX to handle the computing part</h3><p>Instead of doing the visualization in ADX, now we use a query to generate a dataset (two dimensional table)</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">/</span><span class="operator">/</span><span class="keyword">for</span> powerbi map, CANNOT have comments<span class="operator">!</span></span><br><span class="line"></span><br><span class="line">let min_t <span class="operator">=</span> datetime(<span class="number">2019</span><span class="number">-03</span><span class="number">-06</span> <span class="number">12</span>:<span class="number">40</span>:<span class="number">55</span>);</span><br><span class="line">let max_t <span class="operator">=</span> datetime(<span class="number">2019</span><span class="number">-03</span><span class="number">-06</span> <span class="number">12</span>:<span class="number">57</span>:<span class="number">20</span>);</span><br><span class="line">GPSTable</span><br><span class="line"><span class="operator">|</span> <span class="keyword">where</span> <span class="type">timestamp</span> <span class="keyword">between</span> (min_t .. max_t)</span><br><span class="line"><span class="operator">|</span> summarize <span class="keyword">any</span>(longitude), <span class="keyword">any</span>(latitude) <span class="keyword">by</span> bin(<span class="type">timestamp</span>, <span class="number">20</span>s)</span><br><span class="line"><span class="operator">|</span> <span class="keyword">join</span> kind<span class="operator">=</span><span class="keyword">inner</span></span><br><span class="line">(OBDTable </span><br><span class="line"><span class="operator">|</span> <span class="keyword">where</span> <span class="type">timestamp</span> <span class="keyword">between</span> (min_t .. max_t)</span><br><span class="line"><span class="operator">|</span> summarize <span class="built_in">avg</span>(speed), <span class="built_in">avg</span>(maf), <span class="built_in">avg</span>(rpm) <span class="keyword">by</span> bin(<span class="type">timestamp</span>, <span class="number">20</span>s))</span><br><span class="line"><span class="keyword">on</span> <span class="type">timestamp</span> </span><br><span class="line"><span class="operator">|</span> project <span class="type">timestamp</span>, any_latitude, any_longitude, avg_speed, avg_maf, avg_rpm </span><br></pre></td></tr></table></figure>
<img src="/2020/09/22/How-to-build-an-IoT-connected-car-Part-2-Data-Analytics-in-the-Cloud/ADX%20for%20PowerBI.png" class="" title="ADX for PowerBI">
<p>Then use “Query to PowerBI” on the dropdown list. </p>
<p>NOTE: When I was testing this, there was an issue that the Kusto query can NOT have inline comments, otherwise these inline comments will be mixed into the generated powerBI query, which ruined the syntax. Keep all the comments out of the kusto query block.</p>
<h3 id="4-2-In-PowerBI-create-good-looking-visualization-dashboard"><a href="#4-2-In-PowerBI-create-good-looking-visualization-dashboard" class="headerlink" title="4.2 In PowerBI, create good-looking visualization dashboard"></a>4.2 In PowerBI, create good-looking visualization dashboard</h3><p>By using the generated PowerBI query from above, I can easily create differnt visualization dashboard in PowerBI. For example the map:</p>
<img src="/2020/09/22/How-to-build-an-IoT-connected-car-Part-2-Data-Analytics-in-the-Cloud/PowerBI%20map.png" class="" title="Map in PowerBI, with speed group">
<p>It shows one of the trips on the map, as well as the speed: greener is faster, and reder means slower.</p>
<img src="/2020/09/22/How-to-build-an-IoT-connected-car-Part-2-Data-Analytics-in-the-Cloud/PowerBI%20map%20zoom%20in.jpg" class="" title="PowerBI map zoom in">

<h3 id="4-3-Replay-a-trip"><a href="#4-3-Replay-a-trip" class="headerlink" title="4.3 Replay a trip"></a>4.3 Replay a trip</h3><p>Using PowerBI addon such as <a target="_blank" rel="noopener" href="https://appsource.microsoft.com/en-us/product/office/WA104380981">Play Axis (Dynamic Slicer)</a>, it is easy to replay a trip.</p>
<img src="/2020/09/22/How-to-build-an-IoT-connected-car-Part-2-Data-Analytics-in-the-Cloud/PowerBI%20replay%20a%20trip.gif" class="" title="PowerBI replay a trip">
<p>Picture: Play a trip in PowerBI, with map and engine RPM.</p>
<ul>
<li>X-axis: time</li>
<li>Y-axis: speed (from GPS)</li>
<li>Size of the bubble: Engine RPM (from OBD)</li>
</ul>
<p>It clearly shows where was the traffic jam (drops of speed), and where had a good traffic condition (peak of speed and RPM).</p>
<h3 id="4-4-Summary-of-PowerBI-experience"><a href="#4-4-Summary-of-PowerBI-experience" class="headerlink" title="4.4 Summary of PowerBI experience"></a>4.4 Summary of PowerBI experience</h3><p><strong>Pro:</strong></p>
<ul>
<li>Easy to use</li>
<li>Rich visualization (e.g. map)</li>
<li>Easy to share (e.g. PowerBI Online)</li>
</ul>
<p><strong>Con:</strong></p>
<ul>
<li>Not for big data computing, but good for visualization</li>
<li>Need a “big data computing” back end (in our case it is ADX)</li>
</ul>
<h2 id="5-Grafana"><a href="#5-Grafana" class="headerlink" title="5. Grafana"></a>5. Grafana</h2><p>PowerBI is a good visualization tool, but it is not easy to directly create&#x2F;update kusto query in PowerBI. Most likely you will have to run and test the query in ADX, then export to PowerBI. We hope to overcome this issue with Grafana.</p>
<p><a target="_blank" rel="noopener" href="https://grafana.com/">Grafana</a> is an open source tool mainly used for monitoring and data visualization.  With the <a target="_blank" rel="noopener" href="https://grafana.com/grafana/plugins/grafana-azure-data-explorer-datasource">Azure Data Explorer Datasource For Grafana</a> plugin, we can integrate the ADX and Kusto power with fancy and powerful Grafana visualization. </p>
<h3 id="5-1-Run-Grafana-as-docker-with-preinstalled-ADX-data-source-plugin"><a href="#5-1-Run-Grafana-as-docker-with-preinstalled-ADX-data-source-plugin" class="headerlink" title="5.1 Run Grafana as docker, with preinstalled ADX data source plugin"></a>5.1 Run Grafana as docker, with preinstalled ADX data source plugin</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -p 3000:3000 -e <span class="string">&quot;GF_INSTALL_PLUGINS=grafana-azure-data-explorer-datasource&quot;</span> grafana/grafana:latest</span><br></pre></td></tr></table></figure>
<p>Then follow the <a target="_blank" rel="noopener" href="https://grafana.com/grafana/plugins/grafana-azure-data-explorer-datasource">plugin documenation</a> to config access.</p>
<p>Now you can directly create Kusto-enabled dashboard, including map.</p>
<img src="/2020/09/22/How-to-build-an-IoT-connected-car-Part-2-Data-Analytics-in-the-Cloud/grafana%20dashboard.jpg" class="" title="Grafana dashboard">

<h3 id="5-2-Summary-of-Grafana-experience"><a href="#5-2-Summary-of-Grafana-experience" class="headerlink" title="5.2  Summary of Grafana experience"></a>5.2  Summary of Grafana experience</h3><p><strong>Pro:</strong></p>
<ul>
<li>Very rich and powerful visualization</li>
<li>Self-service Kusto enabled queries and build dashboard</li>
<li>Built-in access control and notification support</li>
<li>Big support by the community</li>
</ul>
<p><strong>Con:</strong></p>
<ul>
<li>(cannot find one…for now)</li>
</ul>
<h1 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h1><p>Now we have tried several products, and my favorite setup is ADX (as backend data storage and query) and Grafana (as front end self-service visualization). I believe it meet the most common needs of ordinary users. But of course other products have different focus areas and can&#x2F;should be used for different scenarios. </p>
<p>After all, the old saying is always correct: “It depends.”</p>
<p>Thanks for the reading.</p>
<p>(Read <a href="/2020/09/15/How-to-build-an-IoT-connected-car-Part-1-On-the-Edge/" title="How to build an IoT connected car - Part 1: On the Edge">Part 1</a> of this article series)</p>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="https://feng.lu/2020/09/22/How-to-build-an-IoT-connected-car-Part-2-Data-Analytics-in-the-Cloud/" data-id="cm8smes98000v70nd1i1c1zv9" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    
        <a href="https://feng.lu/2020/09/22/How-to-build-an-IoT-connected-car-Part-2-Data-Analytics-in-the-Cloud/#comments" class="article-comment-link disqus-comment-count" data-disqus-url="https://feng.lu/2020/09/22/How-to-build-an-IoT-connected-car-Part-2-Data-Analytics-in-the-Cloud/">Comments</a>
    

        </footer>
    </div>
    
        
<nav id="article-nav">
    
        <a href="/2021/11/17/Okta-and-AWS-Control-Tower-a-happy-path-demo/" id="article-nav-newer" class="article-nav-link-wrap">
            <strong class="article-nav-caption">Newer</strong>
            <div class="article-nav-title">
                
                    Okta and AWS Control Tower - a happy path demo
                
            </div>
        </a>
    
    
        <a href="/2020/09/15/How-to-build-an-IoT-connected-car-Part-1-On-the-Edge/" id="article-nav-older" class="article-nav-link-wrap">
            <strong class="article-nav-caption">Older</strong>
            <div class="article-nav-title">How to build an IoT connected car - Part 1: On the Edge</div>
        </a>
    
</nav>


    
</article>


    
    <section id="comments">
    
        
    <div id="disqus_thread">
        <noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>

    
    </section>

</section>
            
                <aside id="sidebar">
   
        
    <div class="widget-wrap">
        <h3 class="widget-title">recent</h3>
        <div class="widget">
            <ul id="recent-post" class="no-thumbnail">
                
                    <li>
                        
                        <div class="item-inner">
                            <p class="item-category"></p>
                            <p class="item-title"><a href="/2025/03/28/Building-a-Tibber-MCP-Server-Connect-Your-AI-Agent-to-Energy-Consumption-Data/" class="title">Building a Tibber MCP Server: Connect Your AI Agent to Energy Consumption Data</a></p>
                            <p class="item-date"><time datetime="2025-03-28T13:25:48.000Z" itemprop="datePublished">2025-03-28</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-inner">
                            <p class="item-category"></p>
                            <p class="item-title"><a href="/2024/12/03/Build-a-Multi-Agent-System-to-Discover-the-Top-AI-Model-for-Rock-Paper-Scissors-Games/" class="title">Build a Multi-Agent System to Discover the Top AI Model for Rock-Paper-Scissors Games</a></p>
                            <p class="item-date"><time datetime="2024-12-03T15:21:40.000Z" itemprop="datePublished">2024-12-03</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-inner">
                            <p class="item-category"></p>
                            <p class="item-title"><a href="/2024/09/18/How-to-secretless-access-Azure-and-AWS-resources-with-Azure-managed-identity-and-AWS-IAM/" class="title">Implementing Secret-less Access to Azure and AWS with Azure Managed Identities and AWS IAM</a></p>
                            <p class="item-date"><time datetime="2024-09-18T12:49:21.000Z" itemprop="datePublished">2024-09-18</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-inner">
                            <p class="item-category"></p>
                            <p class="item-title"><a href="/2024/07/04/AWS-Blog-Build-your-multilingual-personal-calendar-assistant-with-Amazon-Bedrock-and-AWS-Step-Functions/" class="title">AWS Blog - Build your multilingual personal calendar assistant with Amazon Bedrock and AWS Step Functions</a></p>
                            <p class="item-date"><time datetime="2024-07-04T08:50:24.000Z" itemprop="datePublished">2024-07-04</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-inner">
                            <p class="item-category"></p>
                            <p class="item-title"><a href="/2023/05/23/Manage-IoT-device-state-anywhere-using-AWS-IoT-services/" class="title">AWS Blog - Manage IoT device state anywhere using AWS IoT Device Shadow service and AWS IoT Greengrass</a></p>
                            <p class="item-date"><time datetime="2023-05-23T08:34:20.000Z" itemprop="datePublished">2023-05-23</time></p>
                        </div>
                    </li>
                
            </ul>
        </div>
    </div>

    
        
    
        
    <div class="widget-wrap">
        <h3 class="widget-title">archives</h3>
        <div class="widget">
            <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/03/">March 2025</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/12/">December 2024</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/09/">September 2024</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/07/">July 2024</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/05/">May 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">February 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">December 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">November 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">January 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">November 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">October 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">September 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">August 2016</a><span class="archive-list-count">3</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">tag cloud</h3>
        <div class="widget tagcloud">
            <a href="/tags/ADFS/" style="font-size: 10px;">ADFS</a> <a href="/tags/AI/" style="font-size: 12.86px;">AI</a> <a href="/tags/AI-Agent/" style="font-size: 12.86px;">AI Agent</a> <a href="/tags/API/" style="font-size: 10px;">API</a> <a href="/tags/ASP-Net-Core/" style="font-size: 10px;">ASP.Net Core</a> <a href="/tags/AWS/" style="font-size: 17.14px;">AWS</a> <a href="/tags/AWS-Control-Tower/" style="font-size: 10px;">AWS Control Tower</a> <a href="/tags/AWS-IoT-Core/" style="font-size: 10px;">AWS IoT Core</a> <a href="/tags/AWS-IoT-Greengrass/" style="font-size: 10px;">AWS IoT Greengrass</a> <a href="/tags/AWS-SSO/" style="font-size: 10px;">AWS SSO</a> <a href="/tags/AWS-Step-Functions/" style="font-size: 10px;">AWS Step Functions</a> <a href="/tags/AWS-Systems-Manager/" style="font-size: 10px;">AWS Systems Manager</a> <a href="/tags/Agent/" style="font-size: 10px;">Agent</a> <a href="/tags/Amazon-Bedrock/" style="font-size: 10px;">Amazon Bedrock</a> <a href="/tags/Amazon-Lookout-for-Vision/" style="font-size: 10px;">Amazon Lookout for Vision</a> <a href="/tags/Application-Insights/" style="font-size: 12.86px;">Application Insights</a> <a href="/tags/Artificial-Intelligence/" style="font-size: 11.43px;">Artificial Intelligence</a> <a href="/tags/Authentication/" style="font-size: 10px;">Authentication</a> <a href="/tags/Authorization/" style="font-size: 10px;">Authorization</a> <a href="/tags/Azure/" style="font-size: 18.57px;">Azure</a> <a href="/tags/Azure-AD-B2C/" style="font-size: 10px;">Azure AD B2C</a> <a href="/tags/Azure-Data-Explorer-ADX/" style="font-size: 10px;">Azure Data Explorer (ADX)</a> <a href="/tags/Azure-IoT-Edge/" style="font-size: 10px;">Azure IoT Edge</a> <a href="/tags/Azure-IoT-Hub/" style="font-size: 10px;">Azure IoT Hub</a> <a href="/tags/Azure-Template/" style="font-size: 10px;">Azure Template</a> <a href="/tags/Blockchain/" style="font-size: 10px;">Blockchain</a> <a href="/tags/Blog/" style="font-size: 12.86px;">Blog</a> <a href="/tags/Build/" style="font-size: 11.43px;">Build</a> <a href="/tags/Car/" style="font-size: 11.43px;">Car</a> <a href="/tags/Chatbot/" style="font-size: 11.43px;">Chatbot</a> <a href="/tags/Claude/" style="font-size: 10px;">Claude</a> <a href="/tags/Continuous-Deployment/" style="font-size: 10px;">Continuous Deployment</a> <a href="/tags/Continuous-Integration/" style="font-size: 10px;">Continuous Integration</a> <a href="/tags/CrewAI/" style="font-size: 10px;">CrewAI</a> <a href="/tags/DIY/" style="font-size: 10px;">DIY</a> <a href="/tags/DLT/" style="font-size: 15.71px;">DLT</a> <a href="/tags/DNS/" style="font-size: 10px;">DNS</a> <a href="/tags/Data-Analytics/" style="font-size: 12.86px;">Data Analytics</a> <a href="/tags/Data-Integrity/" style="font-size: 14.29px;">Data Integrity</a> <a href="/tags/Data-Lineage/" style="font-size: 14.29px;">Data Lineage</a> <a href="/tags/Databricks/" style="font-size: 10px;">Databricks</a> <a href="/tags/Decryption/" style="font-size: 10px;">Decryption</a> <a href="/tags/DevOps/" style="font-size: 14.29px;">DevOps</a> <a href="/tags/Device-Shadow/" style="font-size: 10px;">Device Shadow</a> <a href="/tags/Distributed-Ledger-Technology/" style="font-size: 15.71px;">Distributed Ledger Technology</a> <a href="/tags/Docker/" style="font-size: 11.43px;">Docker</a> <a href="/tags/Domain/" style="font-size: 10px;">Domain</a> <a href="/tags/EC2/" style="font-size: 10px;">EC2</a> <a href="/tags/ECS-Anywhere/" style="font-size: 10px;">ECS Anywhere</a> <a href="/tags/Encoding/" style="font-size: 10px;">Encoding</a> <a href="/tags/Entra-ID/" style="font-size: 10px;">Entra ID</a> <a href="/tags/Fiddler/" style="font-size: 10px;">Fiddler</a> <a href="/tags/Fullnode/" style="font-size: 10px;">Fullnode</a> <a href="/tags/GPS/" style="font-size: 10px;">GPS</a> <a href="/tags/Game/" style="font-size: 10px;">Game</a> <a href="/tags/GenAI/" style="font-size: 12.86px;">GenAI</a> <a href="/tags/Generative-AI/" style="font-size: 12.86px;">Generative AI</a> <a href="/tags/Git/" style="font-size: 12.86px;">Git</a> <a href="/tags/Github/" style="font-size: 11.43px;">Github</a> <a href="/tags/Google-Analytics/" style="font-size: 10px;">Google Analytics</a> <a href="/tags/Google-Tag-Manager/" style="font-size: 10px;">Google Tag Manager</a> <a href="/tags/Grafana/" style="font-size: 10px;">Grafana</a> <a href="/tags/HTTPS/" style="font-size: 10px;">HTTPS</a> <a href="/tags/Hamster/" style="font-size: 10px;">Hamster</a> <a href="/tags/Hexo/" style="font-size: 11.43px;">Hexo</a> <a href="/tags/Home-Assistant/" style="font-size: 10px;">Home Assistant</a> <a href="/tags/IAM/" style="font-size: 11.43px;">IAM</a> <a href="/tags/IOTA/" style="font-size: 15.71px;">IOTA</a> <a href="/tags/Idp/" style="font-size: 10px;">Idp</a> <a href="/tags/Infrastructure-as-Code/" style="font-size: 10px;">Infrastructure as Code</a> <a href="/tags/IoT/" style="font-size: 20px;">IoT</a> <a href="/tags/Istio/" style="font-size: 10px;">Istio</a> <a href="/tags/Json/" style="font-size: 10px;">Json</a> <a href="/tags/Jump-start/" style="font-size: 10px;">Jump-start</a> <a href="/tags/Jupyter-Notebook/" style="font-size: 11.43px;">Jupyter Notebook</a> <a href="/tags/KUDU/" style="font-size: 10px;">KUDU</a> <a href="/tags/Kiali/" style="font-size: 10px;">Kiali</a> <a href="/tags/Kubernetes/" style="font-size: 10px;">Kubernetes</a> <a href="/tags/LLM/" style="font-size: 10px;">LLM</a> <a href="/tags/LangGraph/" style="font-size: 10px;">LangGraph</a> <a href="/tags/Linkedin/" style="font-size: 10px;">Linkedin</a> <a href="/tags/Llama/" style="font-size: 10px;">Llama</a> <a href="/tags/Load-Testing/" style="font-size: 10px;">Load Testing</a> <a href="/tags/MCP/" style="font-size: 10px;">MCP</a> <a href="/tags/Machine-Learning/" style="font-size: 11.43px;">Machine Learning</a> <a href="/tags/Managed-Identity/" style="font-size: 10px;">Managed Identity</a> <a href="/tags/Microsoft-language-understanding-intelligent-service/" style="font-size: 11.43px;">Microsoft language understanding intelligent service</a> <a href="/tags/Model-Context-Protocol/" style="font-size: 10px;">Model Context Protocol</a> <a href="/tags/Monitoring/" style="font-size: 12.86px;">Monitoring</a> <a href="/tags/Movie/" style="font-size: 10px;">Movie</a> <a href="/tags/Nano-Pi/" style="font-size: 10px;">Nano Pi</a> <a href="/tags/Native-App/" style="font-size: 10px;">Native App</a> <a href="/tags/Nodejs/" style="font-size: 10px;">Nodejs</a> <a href="/tags/OAuth/" style="font-size: 11.43px;">OAuth</a> <a href="/tags/OBD2/" style="font-size: 10px;">OBD2</a> <a href="/tags/Okta/" style="font-size: 10px;">Okta</a> <a href="/tags/OpenAI/" style="font-size: 10px;">OpenAI</a> <a href="/tags/OpenID/" style="font-size: 10px;">OpenID</a> <a href="/tags/Plugin/" style="font-size: 10px;">Plugin</a> <a href="/tags/Postman/" style="font-size: 10px;">Postman</a> <a href="/tags/PowerBI/" style="font-size: 12.86px;">PowerBI</a> <a href="/tags/Powershell/" style="font-size: 10px;">Powershell</a> <a href="/tags/Prototype/" style="font-size: 11.43px;">Prototype</a> <a href="/tags/Python/" style="font-size: 12.86px;">Python</a> <a href="/tags/Raspberry-Pi/" style="font-size: 12.86px;">Raspberry Pi</a> <a href="/tags/Release-Management/" style="font-size: 10px;">Release Management</a> <a href="/tags/Release-management/" style="font-size: 10px;">Release management</a> <a href="/tags/SSH/" style="font-size: 10px;">SSH</a> <a href="/tags/SSM/" style="font-size: 10px;">SSM</a> <a href="/tags/SSO/" style="font-size: 10px;">SSO</a> <a href="/tags/SVMP/" style="font-size: 10px;">SVMP</a> <a href="/tags/Scripting/" style="font-size: 10px;">Scripting</a> <a href="/tags/Security/" style="font-size: 10px;">Security</a> <a href="/tags/Service-mesh/" style="font-size: 10px;">Service mesh</a> <a href="/tags/SharePoint-PnP/" style="font-size: 10px;">SharePoint PnP</a> <a href="/tags/Social-Sharing/" style="font-size: 10px;">Social Sharing</a> <a href="/tags/Step-Functions/" style="font-size: 10px;">Step Functions</a> <a href="/tags/Tangle/" style="font-size: 14.29px;">Tangle</a> <a href="/tags/Tibber/" style="font-size: 10px;">Tibber</a> <a href="/tags/Time-Series-Insight-TSI/" style="font-size: 10px;">Time Series Insight (TSI)</a> <a href="/tags/Troubleshooting/" style="font-size: 11.43px;">Troubleshooting</a> <a href="/tags/VPC/" style="font-size: 10px;">VPC</a> <a href="/tags/VPC-Endpoint/" style="font-size: 10px;">VPC Endpoint</a> <a href="/tags/VSTS/" style="font-size: 12.86px;">VSTS</a> <a href="/tags/Vim/" style="font-size: 10px;">Vim</a> <a href="/tags/Visualization/" style="font-size: 10px;">Visualization</a> <a href="/tags/Web-Testing/" style="font-size: 10px;">Web Testing</a> <a href="/tags/Zigbee/" style="font-size: 10px;">Zigbee</a> <a href="/tags/e-paper/" style="font-size: 10px;">e-paper</a>
        </div>
    </div>

    
    <div id="toTop" class="fa fa-angle-up"></div>
</aside>
            
        </div>
        <footer id="footer">
    <div class="outer">
        <div id="footer-info" class="inner">
            &copy; 2025 Feng Lu<br>
            Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>. Theme by <a target="_blank" rel="noopener" href="http://github.com/ppoffice">PPOffice</a>
        </div>
    </div>
</footer>
        
    
    <script>
    var disqus_config = function () {
        
            this.page.url = 'https://feng.lu/2020/09/22/How-to-build-an-IoT-connected-car-Part-2-Data-Analytics-in-the-Cloud/';
        
        this.page.identifier = 'How-to-build-an-IoT-connected-car-Part-2-Data-Analytics-in-the-Cloud';
    };
    (function() { 
        var d = document, s = d.createElement('script');  
        s.src = '//' + 'linkcd' + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>



    
        
<script src="/libs/lightgallery/js/lightgallery.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-pager.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-zoom.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-hash.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-share.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-video.min.js"></script>

    
    
        
<script src="/libs/justified-gallery/jquery.justifiedGallery.min.js"></script>

    



<!-- Custom Scripts -->

<script src="/js/main.js"></script>


    </div>
</body>
</html>
