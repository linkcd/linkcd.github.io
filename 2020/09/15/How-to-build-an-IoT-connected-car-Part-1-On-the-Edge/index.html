<!DOCTYPE html>
<html lang=en>
<head>

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-T85N4CJ');</script>
<!-- End Google Tag Manager -->

	
    <meta charset="utf-8">
    
    <title>How to build an IoT connected car - Part 1: On the Edge | feng.blog();</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="Previously I wrote a blog about how to measure hamster via IoT wheel. This reminds me another personal project I did back to the winter of 2018&#x2F;2019, for measuring car performance.">
<meta property="og:type" content="article">
<meta property="og:title" content="How to build an IoT connected car - Part 1: On the Edge">
<meta property="og:url" content="https://feng.lu/2020/09/15/How-to-build-an-IoT-connected-car-Part-1-On-the-Edge/index.html">
<meta property="og:site_name" content="feng.blog();">
<meta property="og:description" content="Previously I wrote a blog about how to measure hamster via IoT wheel. This reminds me another personal project I did back to the winter of 2018&#x2F;2019, for measuring car performance.">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://feng.lu/2020/09/15/How-to-build-an-IoT-connected-car-Part-1-On-the-Edge/Thumbnail.png">
<meta property="article:published_time" content="2020-09-15T08:38:12.000Z">
<meta property="article:modified_time" content="2025-03-28T09:05:16.640Z">
<meta property="article:author" content="Feng Lu">
<meta property="article:tag" content="IoT">
<meta property="article:tag" content="Raspberry Pi">
<meta property="article:tag" content="Data Analytics">
<meta property="article:tag" content="Car">
<meta property="article:tag" content="Azure IoT Hub">
<meta property="article:tag" content="Azure IoT Edge">
<meta property="article:tag" content="GPS">
<meta property="article:tag" content="OBD2">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://feng.lu/2020/09/15/How-to-build-an-IoT-connected-car-Part-1-On-the-Edge/Thumbnail.png">
    

    
        <link rel="alternate" href="/atom.xml" title="feng.blog();" type="application/atom+xml" />
    

    
        <link rel="icon" href="/images/favicon.png" />
    

    
<link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">

    
<link rel="stylesheet" href="/libs/open-sans/styles.css">

    
<link rel="stylesheet" href="/libs/source-code-pro/styles.css">


    
<link rel="stylesheet" href="/css/style.css">


    
<script src="/libs/jquery/2.1.3/jquery.min.js"></script>

    
    
        
<link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">

    
    
        
<link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css">

    
    
    


<meta name="generator" content="Hexo 7.3.0"></head>

<body>
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T85N4CJ"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

    <div id="container">
        <header id="header">
    <div id="header-main" class="header-inner">
        <div class="outer">
            <a href="/" id="logo">
                <i class="logo"></i>
                <span class="site-title">feng.blog();</span>
            </a>
            <nav id="main-nav">
                
                    <a class="main-nav-link" href="/.">Home</a>
                
                    <a class="main-nav-link" href="/archives">Archives</a>
                
            </nav>
            
                
                <nav id="sub-nav">
                    <div class="profile" id="profile-nav">
                        <a id="profile-anchor" href="javascript:;">
                            <img class="avatar" src="/images/avatar.jpg" />
                            <i class="fa fa-caret-down"></i>
                        </a>
                    </div>
                </nav>
            
            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Search" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>

<script src="/js/insight.js"></script>


</div>
        </div>
    </div>
    <div id="main-nav-mobile" class="header-sub header-inner">
        <table class="menu outer">
            <tr>
                
                    <td><a class="main-nav-link" href="/.">Home</a></td>
                
                    <td><a class="main-nav-link" href="/archives">Archives</a></td>
                
                <td>
                    
    <div class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Search" />
    </div>

                </td>
            </tr>
        </table>
    </div>
</header>

        <div class="outer">
            
                

<aside id="profile">
    <div class="inner profile-inner">
        <div class="base-info profile-block">
            <img id="avatar" src="/images/avatar.jpg" />
            <h2 id="name">Feng Lu</h2>
            <h3 id="title">Builder, Speaker, Architect and Technical Evangelist</h3>
            <span id="location"><i class="fa fa-map-marker"></i>Oslo Area, Norway</span>
        </div>
        <div class="article-info profile-block">
            <div class="article-info-block">
                39
                <span>posts</span>
            </div>
            <div class="article-info-block">
                129
                <span>tags</span>
            </div>
        </div>
        
        <div class="profile-block social-links">
            <table>
                <tr>
                    
                    
                    <td>
                        <a href="https://www.linkedin.com/in/linkcd" target="_blank" title="linkedin" class=tooltip>
                            <i class="fa fa-linkedin"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="https://github.com/linkcd" target="_blank" title="github" class=tooltip>
                            <i class="fa fa-github"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="/atom.xml" target="_blank" title="rss" class=tooltip>
                            <i class="fa fa-rss"></i>
                        </a>
                    </td>
                    
                </tr>
            </table>
        </div>
        
    </div>
</aside>

            
            <section id="main"><article id="post-How-to-build-an-IoT-connected-car-Part-1-On-the-Edge" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 class="article-title" itemprop="name">
            How to build an IoT connected car - Part 1: On the Edge
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2020/09/15/How-to-build-an-IoT-connected-car-Part-1-On-the-Edge/">
            <time datetime="2020-09-15T08:38:12.000Z" itemprop="datePublished">2020-09-15</time>
        </a>
    </div>


                        
                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link-link" href="/tags/Azure-IoT-Edge/" rel="tag">Azure IoT Edge</a>, <a class="tag-link-link" href="/tags/Azure-IoT-Hub/" rel="tag">Azure IoT Hub</a>, <a class="tag-link-link" href="/tags/Car/" rel="tag">Car</a>, <a class="tag-link-link" href="/tags/Data-Analytics/" rel="tag">Data Analytics</a>, <a class="tag-link-link" href="/tags/GPS/" rel="tag">GPS</a>, <a class="tag-link-link" href="/tags/IoT/" rel="tag">IoT</a>, <a class="tag-link-link" href="/tags/OBD2/" rel="tag">OBD2</a>, <a class="tag-link-link" href="/tags/Raspberry-Pi/" rel="tag">Raspberry Pi</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <p>Previously I wrote a blog about how to <a href="/2020/08/05/How-to-measure-your-Hamster-s-running-with-IoT/" title="How to measure your Hamster&#39;s running with wireless IoT">measure hamster via IoT wheel</a>. This reminds me another personal project I did back to the winter of 2018&#x2F;2019, for measuring car performance. </p>
<img src="/2020/09/15/How-to-build-an-IoT-connected-car-Part-1-On-the-Edge/Thumbnail.png" class="" title="Thumbnail"> 

<span id="more"></span>
<h1 id="Other-articles-in-this-series"><a href="#Other-articles-in-this-series" class="headerlink" title="Other articles in this series:"></a>Other articles in this series:</h1><ul>
<li>Part 1 (this article):<br>Talk about the hardware&#x2F;software running on the edge (the car) for collecting data.</li>
<li><a href="/2020/09/22/How-to-build-an-IoT-connected-car-Part-2-Data-Analytics-in-the-Cloud/" title="How to build an IoT connected car - Part 2: Data Analytics in the Cloud">Part 2</a>:
Talk about how to get insight from the data with different analytic tools.</li>
</ul>
<h1 id="1-Overview-on-the-edge"><a href="#1-Overview-on-the-edge" class="headerlink" title="1. Overview on the edge"></a>1. Overview on the edge</h1><h2 id="1-1-Hardware"><a href="#1-1-Hardware" class="headerlink" title="1.1 Hardware"></a>1.1 Hardware</h2><ul>
<li>OBD2 USB connector<br><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/On-board_diagnostics">OBD2</a> is an interface&#x2F;protocol that is available for 1996 and newer vehicles. It reports <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/OBD-II_PIDs">various telemetries</a> of the vehicle.</li>
<li>USB GPS dongle<br>For collecting location information</li>
<li>Raspberry Pi<br>Running Linux, Azure IoT Edge runtime and hosting 2 modules (OBD and GPS location)</li>
<li>USB Wifi dongle<br>For connecting mobile phone hotspot</li>
<li>Mobile phone<br>For realtime data uploading to the cloud via 4G</li>
<li>Power bank (optional)<br>For powering up raspberry pi. Alternatively, you can use a 12V-&gt;5V adapter to use the car battery.</li>
</ul>
<h2 id="1-2-Software"><a href="#1-2-Software" class="headerlink" title="1.2 Software"></a>1.2 Software</h2><ul>
<li>Azure IoT Edge</li>
<li>Docker</li>
<li>Python</li>
</ul>
<h2 id="1-3-Dataflow-and-Architecture"><a href="#1-3-Dataflow-and-Architecture" class="headerlink" title="1.3 Dataflow and Architecture"></a>1.3 Dataflow and Architecture</h2><img src="/2020/09/15/How-to-build-an-IoT-connected-car-Part-1-On-the-Edge/hardware%20architecture.png" class="" title="Hardware architecture">

<h1 id="2-Developing-IoT-Edge-modules"><a href="#2-Developing-IoT-Edge-modules" class="headerlink" title="2. Developing IoT Edge modules"></a>2. Developing IoT Edge modules</h1><h2 id="2-1-Introduction"><a href="#2-1-Introduction" class="headerlink" title="2.1 Introduction"></a>2.1 Introduction</h2><h3 id="2-1-1-Design-Principles"><a href="#2-1-1-Design-Principles" class="headerlink" title="2.1.1 Design Principles"></a>2.1.1 Design Principles</h3><p>As there are many possible situations can happen on the edge, such as disconnection from OBD2 connector, or loss of GPS signal (when going through an underground tunnel), the modules are built with the following principles:</p>
<ul>
<li>Design for failure </li>
<li>Auto healing</li>
</ul>
<p>In addition, the modules are built into docker containers, together with Azure IoT Edge runtime, which makes it easier to deploy.</p>
<h3 id="2-1-2-Source-code"><a href="#2-1-2-Source-code" class="headerlink" title="2.1.2 Source code"></a>2.1.2 Source code</h3><p>All source code can be found at <a target="_blank" rel="noopener" href="https://github.com/linkcd/IoTCar">https://github.com/linkcd/IoTCar</a></p>
<h3 id="2-1-3-Sample-data"><a href="#2-1-3-Sample-data" class="headerlink" title="2.1.3 Sample data"></a>2.1.3 Sample data</h3><p>This edge device (raspberry pi + OBD connector + GPS dongle) reports the following data per second:</p>
<img src="/2020/09/15/How-to-build-an-IoT-connected-car-Part-1-On-the-Edge/sample-data.png" class="" title="sample data">

<h2 id="2-2-GPS-location-module-details"><a href="#2-2-GPS-location-module-details" class="headerlink" title="2.2 GPS location module - details"></a>2.2 GPS location module - details</h2><p><a target="_blank" rel="noopener" href="https://github.com/linkcd/IoTCar/tree/master/modules/LocatorModule">Source code</a></p>
<p>With a USB GPS dongle, it is quite easy to get the location information by using tools such as <a target="_blank" rel="noopener" href="https://gpsd.gitlab.io/gpsd/index.html">GPSD</a>.</p>
<h3 id="2-2-1-You-have-to-dev-test-in-the-field-not-only-in-the-office"><a href="#2-2-1-You-have-to-dev-test-in-the-field-not-only-in-the-office" class="headerlink" title="2.2.1 You have to dev&#x2F;test in the field, not only in the office"></a>2.2.1 You have to dev&#x2F;test in the field, not only in the office</h3><p>I immediately met the first challenge: The USB GPS dongle requires a good open sky view to work well. The one that I used does not have an antenna, so I need to put the whole thing (raspberry pi + GPS dongle) outside of the building (or at least outside of the window).</p>
<p>Remind you that it was winter in Norway during that time, and I was not a fan of typing keyboard in the snow with -5 degrees. </p>
<p>Firstly, I have tried do this in my car: parked the car in an outdoor parking slot, put the raspberry pi on the dashboard and remote desktop to it. Well, it worked, GSP signal was strong, but it was quite difficult to type any keys behind the steering wheel :)</p>
<img src="/2020/09/15/How-to-build-an-IoT-connected-car-Part-1-On-the-Edge/GPS-in-car-small.png" class="" title="Testing GPS in the car">

<p>But soon I figured out a better solution on my balcony (see below picture), and that worked perfectly (as far as the wifi signal is good and the power bank battery did not die from the low temperature)</p>
<img src="/2020/09/15/How-to-build-an-IoT-connected-car-Part-1-On-the-Edge/gps-programming-in-winter.png" class="" title="programming GPS in winter">

<p>Now I can work from a warm cozy place and deal with the GPS data that is collected from the “cold box”. </p>
<h3 id="2-2-2-Working-with-GPS-data-with-python"><a href="#2-2-2-Working-with-GPS-data-with-python" class="headerlink" title="2.2.2 Working with GPS data with python"></a>2.2.2 Working with GPS data with python</h3><p>The GPS receiver reports data as <a target="_blank" rel="noopener" href="https://www.gpsinformation.org/dale/nmea.htm#nmea">NMEA sentences</a>, and we are combining <a target="_blank" rel="noopener" href="https://www.gpsinformation.org/dale/nmea.htm#GGA">GGA</a> and <a target="_blank" rel="noopener" href="https://www.gpsinformation.org/dale/nmea.htm#RMC">RMC</a>. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># GGA </span></span><br><span class="line"><span class="variable">$GPGGA</span>,123519,4807.038,N,01131.000,E,1,08,0.9,545.4,M,46.9,M,,*47</span><br><span class="line"><span class="comment"># RMC</span></span><br><span class="line"><span class="variable">$GPRMC</span>,123519,A,4807.038,N,01131.000,E,022.4,084.4,230394,003.1,W*6A</span><br></pre></td></tr></table></figure>
<p>Here we are using a python lib <a target="_blank" rel="noopener" href="https://github.com/Knio/pynmea2">pynmea2</a> for handling the NMEA sentences, the detailed logic can be found at <a target="_blank" rel="noopener" href="https://github.com/linkcd/IoTCar/blob/master/modules/LocatorModule/gpsreader.py#L66">source code here</a>.</p>
<p>In addition, we need to do some <a target="_blank" rel="noopener" href="https://github.com/linkcd/IoTCar/blob/master/modules/LocatorModule/gpsreader.py#L27">small math</a> for calculating the correct latitude and longitude, otherwise you will find your car was driving in the ocean :)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># The latitude is formatted as DDMM.ffff and longitude is DDDMM.ffff where D is the degrees and M is minutes plus the fractional minutes. </span></span><br><span class="line"><span class="comment"># So, 1300.8067,N is 13 degrees 00.8067 minutes North and the longitude of 07733.0003,E is read as 77 degrees 33.0003 minutes East.</span></span><br><span class="line"><span class="comment"># Converting to degrees you would have to do this: 13 + 00.8067/60 for latitude and 77 + 33.0003/60 for the longitude.</span></span><br><span class="line"><span class="comment"># ##NMEA outputs in a human readable DDDMM.mmmm format NOT DECIMAL DEGREES</span></span><br><span class="line"><span class="comment"># 3746.03837</span></span><br><span class="line"><span class="comment"># 37 46.03837</span></span><br><span class="line"><span class="comment"># 37 + (46.03837 / 60)</span></span><br><span class="line"><span class="comment"># result = 37 + 0.7673062</span></span><br><span class="line"></span><br><span class="line">segments = value.split(<span class="string">&#x27;.&#x27;</span>)</span><br><span class="line"><span class="keyword">if</span> <span class="built_in">len</span>(segments[<span class="number">0</span>]) == <span class="number">4</span>:</span><br><span class="line">    <span class="comment">#lanitude</span></span><br><span class="line">    degree = segments[<span class="number">0</span>][:<span class="number">2</span>]</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="comment">#longtitude</span></span><br><span class="line">    degree = segments[<span class="number">0</span>][:<span class="number">3</span>]</span><br><span class="line"></span><br><span class="line">minute = <span class="built_in">round</span>(Decimal(segments[<span class="number">0</span>][-<span class="number">2</span>:] + <span class="string">&quot;.&quot;</span> + segments[<span class="number">1</span>])/<span class="number">60</span>, <span class="number">6</span>)</span><br></pre></td></tr></table></figure>

<p>Finally, this module reports the following data per second</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;series&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;mag_variation&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;geo_sep&quot;</span><span class="punctuation">:</span> <span class="string">&quot;39.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;num_sats&quot;</span><span class="punctuation">:</span> <span class="number">5</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;fixed_time&quot;</span><span class="punctuation">:</span> <span class="string">&quot;20:33:21&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;geo_sep_units&quot;</span><span class="punctuation">:</span> <span class="string">&quot;M&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;horizontal_dil&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2.21&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;longitude_dir&quot;</span><span class="punctuation">:</span> <span class="string">&quot;E&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;mag_var_dir&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;gps_speed&quot;</span><span class="punctuation">:</span> <span class="number">0.242</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;altitude_units&quot;</span><span class="punctuation">:</span> <span class="string">&quot;M&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;true_course&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;latitude&quot;</span><span class="punctuation">:</span> <span class="string">&quot;11.111111&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;fixed_full_timestamp&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2019-02-26 20:33:21&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;latitude_dir&quot;</span><span class="punctuation">:</span> <span class="string">&quot;N&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;fixed_date&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2019-02-26&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;gps_quality&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;longitude&quot;</span><span class="punctuation">:</span> <span class="string">&quot;22.222222&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;altitude&quot;</span><span class="punctuation">:</span> <span class="number">93.4</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;deviceId&quot;</span><span class="punctuation">:</span> <span class="string">&quot;FengsDevice_GPS&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;timestamp&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2019-02-26 20:33:21&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="2-3-OBD2-module-details"><a href="#2-3-OBD2-module-details" class="headerlink" title="2.3 OBD2 module - details"></a>2.3 OBD2 module - details</h2><p><a target="_blank" rel="noopener" href="https://github.com/linkcd/IoTCar/tree/master/modules/OBDModule">Source code</a></p>
<h3 id="2-3-1-You-cannot-do-it-in-the-field-do-it-on-an-emulator-instead"><a href="#2-3-1-You-cannot-do-it-in-the-field-do-it-on-an-emulator-instead" class="headerlink" title="2.3.1 You cannot do it in the field, do it on an emulator instead"></a>2.3.1 You cannot do it in the field, do it on an emulator instead</h3><p>Programming&#x2F;debugging OBD2 can be difficult - after all I do not want to be programming while driving. Instead of hiring a driver and typing the keyboard on the passenger seat, it is better to use an ODB emulator to emulate all telemetries (and error codes) of the car.</p>
<h4 id="OBD2-Emulator"><a href="#OBD2-Emulator" class="headerlink" title="OBD2 Emulator"></a>OBD2 Emulator</h4><p>Lucky I am not alone who has the same problem during OBD development. There are professional and affordable emulators on <a target="_blank" rel="noopener" href="https://www.alibaba.com/product-detail/Professional-OBD2-Emulator-Tool-for-OBD_62315028570.html">Aliexpress</a> and <a target="_blank" rel="noopener" href="https://item.taobao.com/item.htm?spm=a230r.1.14.37.532d3fe1POSTRH&id=613000775363&ns=1&abbucket=12#detail">Taobao</a> (BTW The price on Taobao is 1&#x2F;3 as Aliexpress!).  The detailed features can be found at [here](OBD emulator features.jpg). My respects to the designers of this emulator - you are life savers!</p>
<img src="/2020/09/15/How-to-build-an-IoT-connected-car-Part-1-On-the-Edge/OBD%20emulator%203.png" class="" title="OBD emulator">
<img src="/2020/09/15/How-to-build-an-IoT-connected-car-Part-1-On-the-Edge/OBD%20emulator1.jpg" class="" title="OBD emulator">

<h3 id="2-3-2-Design-for-failure-and-auto-healing"><a href="#2-3-2-Design-for-failure-and-auto-healing" class="headerlink" title="2.3.2 Design for failure and auto healing"></a>2.3.2 Design for failure and auto healing</h3><p>Now, with the emulator and python <a target="_blank" rel="noopener" href="https://pypi.org/project/obd/">obd lib</a>, it is easy to collect the telemetries of the car.</p>
<p>However, the library does not take care of failures and auto-healing, which we need to do it ourselves, otherwise the code just throw exceptions and stop working.</p>
<p>Thanks to the emulator, it is easy to test all corner scenarios, such as disconnect the ODB and reconnect while “the engine” is still running, in a safe environment. That is impossible to test&#x2F;debug with real car.</p>
<p>The following code snippet ensures the modules works with different scenarios and self-healing:</p>
<ul>
<li>Car is powered off</li>
<li>Car is powered on but engine is not started yet</li>
<li>Engine starts</li>
<li>Engine is stopped but car is still powered on</li>
<li>OBD receiver is disconnected (e.g lost bluetooth signal)</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">getVehicleTelemtries</span>(<span class="params">deviceId</span>):</span><br><span class="line">    <span class="keyword">global</span> connection</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">not</span> connection.is_connected()):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;No connecting to the car, reconnecting...&quot;</span>)</span><br><span class="line">        connection = obd.OBD(fast=<span class="literal">True</span>) </span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="comment"># Use library to get readings...</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span>(telemtryDic[<span class="string">&quot;RPM&quot;</span>] == <span class="number">0</span>):</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;Cannot read RPM, reconnecting...&quot;</span>)</span><br><span class="line">            connection = obd.OBD(fast=<span class="literal">True</span>) </span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> buildJsonPayload(deviceId, telemtryDic)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Error with OBDII, error: &quot;</span> + <span class="built_in">str</span>(e) + <span class="string">&quot;. Reconnecting...&quot;</span>)</span><br><span class="line">        connection = obd.OBD(fast=<span class="literal">True</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">None</span></span><br></pre></td></tr></table></figure>
<img src="/2020/09/15/How-to-build-an-IoT-connected-car-Part-1-On-the-Edge/ODB%20connection%20in%20car.jpg" class="" title="obd connection in car">

<p>Finally, this module reports the following data per second:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;series&quot;</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;SPEED&quot;</span>: <span class="number">56</span>,</span><br><span class="line">      <span class="string">&quot;RPM&quot;</span>: <span class="number">2830.75</span>,</span><br><span class="line">      <span class="string">&quot;RUN_TIME&quot;</span>: <span class="number">639</span>,</span><br><span class="line">      <span class="string">&quot;ABSOLUTE_LOAD&quot;</span>: <span class="number">0.0</span>,</span><br><span class="line">      <span class="string">&quot;SHORT_FUEL_TRIM_1&quot;</span>: -<span class="number">21.09375</span>,</span><br><span class="line">      <span class="string">&quot;TIMING_ADVANCE&quot;</span>: <span class="number">0.0</span>,</span><br><span class="line">      <span class="string">&quot;INTAKE_PRESSURE&quot;</span>: <span class="number">0</span>,</span><br><span class="line">      <span class="string">&quot;LONG_FUEL_TRIM_1&quot;</span>: <span class="number">18.75</span>,</span><br><span class="line">      <span class="string">&quot;INTAKE_TEMP&quot;</span>: <span class="number">0</span>,</span><br><span class="line">      <span class="string">&quot;THROTTLE_POS&quot;</span>: <span class="number">37.64705882352941</span>,</span><br><span class="line">      <span class="string">&quot;OIL_TEMP&quot;</span>: <span class="number">16</span>,</span><br><span class="line">      <span class="string">&quot;MAF&quot;</span>: <span class="number">655.35</span>,</span><br><span class="line">      <span class="string">&quot;RELATIVE_THROTTLE_POS&quot;</span>: <span class="number">0.0</span>,</span><br><span class="line">      <span class="string">&quot;COOLANT_TEMP&quot;</span>: <span class="number">0</span>,</span><br><span class="line">      <span class="string">&quot;ENGINE_LOAD&quot;</span>: <span class="number">45.490196078431374</span></span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="string">&quot;timestamp&quot;</span>: <span class="string">&quot;2019-02-20 19:27:11.705387&quot;</span>,</span><br><span class="line">  <span class="string">&quot;deviceId&quot;</span>: <span class="string">&quot;FengsDevice_OBD&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2-3-3-Tips-Considering-use-‘Real-Time-Clock’-or-RTC-board-for-your-Pi"><a href="#2-3-3-Tips-Considering-use-‘Real-Time-Clock’-or-RTC-board-for-your-Pi" class="headerlink" title="2.3.3 Tips: Considering use ‘Real Time Clock’ or RTC board for your Pi"></a>2.3.3 Tips: Considering use ‘Real Time Clock’ or RTC board for your Pi</h3><p>As Raspberry PI does not have an RTC, the system clock was reset after each power-on. If it has an internet connection, it will fetch the correct date-time from internet, with some delay.</p>
<p>In the current logic, both GPS and OBD modules are using the system clock as the event timestamp. Therefore, if the Pi failed to have internet connection (happened often with mobile hotspot) or sending data before system clock is updated due to delay, the event timestamp will be incorrect.</p>
<p>To overcome this issue, you can install a RTC (Real Time Clock) to the Raspberry Pi, such as <a target="_blank" rel="noopener" href="https://learn.adafruit.com/adding-a-real-time-clock-to-raspberry-pi">this</a> and <a target="_blank" rel="noopener" href="https://thepihut.com/blogs/raspberry-pi-tutorials/17209332-adding-a-real-time-clock-to-your-raspberry-pi">this</a>.</p>
<p>I end up with a <a target="_blank" rel="noopener" href="https://www.tindie.com/products/rachel/ups-18650-for-raspberry-pi/">UPS-18650 Raspberry pi UPS Power Expansion Board With RTC</a>. It comes with a power bank AND a built-in RTC. It is design and built by <a target="_blank" rel="noopener" href="https://www.tindie.com/stores/rachel/">ACE design studio</a> in China, and I am very happy about it. Definitely buy more from them next time.</p>
<img src="/2020/09/15/How-to-build-an-IoT-connected-car-Part-1-On-the-Edge/Pi%20with%20RTC.png" class="" title="Raspberry Pi with UPS power expansion board and LoRa&#x2F;GPS Hat">
<p>(Picture: My to-be-tested Raspberry Pi with UPS power expansion board and LoRa&#x2F;GPS Hat.Hopefully it can use LoRa network connections to replace 4G)</p>
<h1 id="3-Put-things-together-and-send-to-Azure"><a href="#3-Put-things-together-and-send-to-Azure" class="headerlink" title="3. Put things together and send to Azure"></a>3. Put things together and send to Azure</h1><h2 id="3-1-Config-on-the-edge"><a href="#3-1-Config-on-the-edge" class="headerlink" title="3.1 Config on the edge"></a>3.1 Config on the edge</h2><p>Now we have 2 modules and we have built them into 2 docker images (in variables ${MODULES.OBDModule.arm32v7} and ${MODULES.LocatorModule.arm32v7}). I was hosting them in the dockerhub but it can also be hosted in any private registration.</p>
<p>For now we did not do any computing on the edge but simply forward them to Azure Iot Hub (see <a target="_blank" rel="noopener" href="https://github.com/linkcd/IoTCar/blob/96501440601ced4e2e4d18f3e37d24905591c718/deployment.template.json#L96">here</a>)</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;$edgeHub&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;properties.desired&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;schemaVersion&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;routes&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">          <span class="attr">&quot;OBDModuleToIoTHub&quot;</span><span class="punctuation">:</span> <span class="string">&quot;FROM /messages/modules/OBDModule/outputs/* INTO $upstream&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;LocatorModuleToIoTHub&quot;</span><span class="punctuation">:</span> <span class="string">&quot;FROM /messages/modules/LocatorModule/outputs/* INTO $upstream&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;storeAndForwardConfiguration&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">          <span class="attr">&quot;timeToLiveSecs&quot;</span><span class="punctuation">:</span> <span class="number">7200</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>More info can be found in the <a target="_blank" rel="noopener" href="https://github.com/linkcd/IoTCar/blob/master/deployment.template.json">deployment.template.json</a>.</p>
<h2 id="3-2-Visualization-in-the-cloud"><a href="#3-2-Visualization-in-the-cloud" class="headerlink" title="3.2  Visualization in the cloud"></a>3.2  Visualization in the cloud</h2><p>Now we 2 module docker images running on the Raspberry Pi and sending data to Azure IoT Edge runtime. The Raspberry Pi has wifi connection to mobile phone 4G hotspot and forwarding the data to Azure IoT Hub in realtime. </p>
<p>With Azure IoT Hub and <a target="_blank" rel="noopener" href="https://azure.microsoft.com/en-us/services/time-series-insights/">Azure Time Series Insights(TSI)</a>, we can now visualize the data:</p>
<img src="/2020/09/15/How-to-build-an-IoT-connected-car-Part-1-On-the-Edge/TSI%20sample.png" class="" title="Azure Time Series Insight sample">

<p>This is a quick example of data analytics for the IoT car. In the <a href="/2020/09/22/How-to-build-an-IoT-connected-car-Part-2-Data-Analytics-in-the-Cloud/" title="How to build an IoT connected car - Part 2: Data Analytics in the Cloud">second part</a> of the series, I will talk more about the data analytics part (including TSI, DataBrick ++) in the cloud.</p>
<a href="/2020/09/22/How-to-build-an-IoT-connected-car-Part-2-Data-Analytics-in-the-Cloud/" title="How to build an IoT connected car - Part 2: Data Analytics in the Cloud">Continue reading part 2</a>
        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="https://feng.lu/2020/09/15/How-to-build-an-IoT-connected-car-Part-1-On-the-Edge/" data-id="cm8t2lr24001308nd5c75cfr9" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    
        <a href="https://feng.lu/2020/09/15/How-to-build-an-IoT-connected-car-Part-1-On-the-Edge/#comments" class="article-comment-link disqus-comment-count" data-disqus-url="https://feng.lu/2020/09/15/How-to-build-an-IoT-connected-car-Part-1-On-the-Edge/">Comments</a>
    

        </footer>
    </div>
    
        
<nav id="article-nav">
    
        <a href="/2020/09/22/How-to-build-an-IoT-connected-car-Part-2-Data-Analytics-in-the-Cloud/" id="article-nav-newer" class="article-nav-link-wrap">
            <strong class="article-nav-caption">Newer</strong>
            <div class="article-nav-title">
                
                    How to build an IoT connected car - Part 2: Data Analytics in the Cloud
                
            </div>
        </a>
    
    
        <a href="/2020/08/05/How-to-measure-your-Hamster-s-running-with-IoT/" id="article-nav-older" class="article-nav-link-wrap">
            <strong class="article-nav-caption">Older</strong>
            <div class="article-nav-title">How to measure your Hamster&#39;s running with wireless IoT</div>
        </a>
    
</nav>


    
</article>


    
    <section id="comments">
    
        
    <div id="disqus_thread">
        <noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>

    
    </section>

</section>
            
                <aside id="sidebar">
   
        
    <div class="widget-wrap">
        <h3 class="widget-title">recent</h3>
        <div class="widget">
            <ul id="recent-post" class="no-thumbnail">
                
                    <li>
                        
                        <div class="item-inner">
                            <p class="item-category"></p>
                            <p class="item-title"><a href="/2025/03/28/Building-a-Tibber-MCP-Server-Connect-Your-AI-Agent-to-Energy-Consumption-Data/" class="title">Building a Tibber MCP Server: Connect Your AI Agent to Energy Consumption Data</a></p>
                            <p class="item-date"><time datetime="2025-03-28T13:25:48.000Z" itemprop="datePublished">2025-03-28</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-inner">
                            <p class="item-category"></p>
                            <p class="item-title"><a href="/2024/12/03/Build-a-Multi-Agent-System-to-Discover-the-Top-AI-Model-for-Rock-Paper-Scissors-Games/" class="title">Build a Multi-Agent System to Discover the Top AI Model for Rock-Paper-Scissors Games</a></p>
                            <p class="item-date"><time datetime="2024-12-03T15:21:40.000Z" itemprop="datePublished">2024-12-03</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-inner">
                            <p class="item-category"></p>
                            <p class="item-title"><a href="/2024/09/18/How-to-secretless-access-Azure-and-AWS-resources-with-Azure-managed-identity-and-AWS-IAM/" class="title">Implementing Secret-less Access to Azure and AWS with Azure Managed Identities and AWS IAM</a></p>
                            <p class="item-date"><time datetime="2024-09-18T12:49:21.000Z" itemprop="datePublished">2024-09-18</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-inner">
                            <p class="item-category"></p>
                            <p class="item-title"><a href="/2024/07/04/AWS-Blog-Build-your-multilingual-personal-calendar-assistant-with-Amazon-Bedrock-and-AWS-Step-Functions/" class="title">AWS Blog - Build your multilingual personal calendar assistant with Amazon Bedrock and AWS Step Functions</a></p>
                            <p class="item-date"><time datetime="2024-07-04T08:50:24.000Z" itemprop="datePublished">2024-07-04</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-inner">
                            <p class="item-category"></p>
                            <p class="item-title"><a href="/2023/05/23/Manage-IoT-device-state-anywhere-using-AWS-IoT-services/" class="title">AWS Blog - Manage IoT device state anywhere using AWS IoT Device Shadow service and AWS IoT Greengrass</a></p>
                            <p class="item-date"><time datetime="2023-05-23T08:34:20.000Z" itemprop="datePublished">2023-05-23</time></p>
                        </div>
                    </li>
                
            </ul>
        </div>
    </div>

    
        
    
        
    <div class="widget-wrap">
        <h3 class="widget-title">archives</h3>
        <div class="widget">
            <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/03/">March 2025</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/12/">December 2024</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/09/">September 2024</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/07/">July 2024</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/05/">May 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">February 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">December 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">November 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">January 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">November 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">October 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">September 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">August 2016</a><span class="archive-list-count">3</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">tag cloud</h3>
        <div class="widget tagcloud">
            <a href="/tags/ADFS/" style="font-size: 10px;">ADFS</a> <a href="/tags/AI/" style="font-size: 12.86px;">AI</a> <a href="/tags/AI-Agent/" style="font-size: 12.86px;">AI Agent</a> <a href="/tags/API/" style="font-size: 10px;">API</a> <a href="/tags/ASP-Net-Core/" style="font-size: 10px;">ASP.Net Core</a> <a href="/tags/AWS/" style="font-size: 17.14px;">AWS</a> <a href="/tags/AWS-Control-Tower/" style="font-size: 10px;">AWS Control Tower</a> <a href="/tags/AWS-IoT-Core/" style="font-size: 10px;">AWS IoT Core</a> <a href="/tags/AWS-IoT-Greengrass/" style="font-size: 10px;">AWS IoT Greengrass</a> <a href="/tags/AWS-SSO/" style="font-size: 10px;">AWS SSO</a> <a href="/tags/AWS-Step-Functions/" style="font-size: 10px;">AWS Step Functions</a> <a href="/tags/AWS-Systems-Manager/" style="font-size: 10px;">AWS Systems Manager</a> <a href="/tags/Agent/" style="font-size: 10px;">Agent</a> <a href="/tags/Amazon-Bedrock/" style="font-size: 10px;">Amazon Bedrock</a> <a href="/tags/Amazon-Lookout-for-Vision/" style="font-size: 10px;">Amazon Lookout for Vision</a> <a href="/tags/Application-Insights/" style="font-size: 12.86px;">Application Insights</a> <a href="/tags/Artificial-Intelligence/" style="font-size: 11.43px;">Artificial Intelligence</a> <a href="/tags/Authentication/" style="font-size: 10px;">Authentication</a> <a href="/tags/Authorization/" style="font-size: 10px;">Authorization</a> <a href="/tags/Azure/" style="font-size: 18.57px;">Azure</a> <a href="/tags/Azure-AD-B2C/" style="font-size: 10px;">Azure AD B2C</a> <a href="/tags/Azure-Data-Explorer-ADX/" style="font-size: 10px;">Azure Data Explorer (ADX)</a> <a href="/tags/Azure-IoT-Edge/" style="font-size: 10px;">Azure IoT Edge</a> <a href="/tags/Azure-IoT-Hub/" style="font-size: 10px;">Azure IoT Hub</a> <a href="/tags/Azure-Template/" style="font-size: 10px;">Azure Template</a> <a href="/tags/Blockchain/" style="font-size: 10px;">Blockchain</a> <a href="/tags/Blog/" style="font-size: 12.86px;">Blog</a> <a href="/tags/Build/" style="font-size: 11.43px;">Build</a> <a href="/tags/Car/" style="font-size: 11.43px;">Car</a> <a href="/tags/Chatbot/" style="font-size: 11.43px;">Chatbot</a> <a href="/tags/Claude/" style="font-size: 10px;">Claude</a> <a href="/tags/Continuous-Deployment/" style="font-size: 10px;">Continuous Deployment</a> <a href="/tags/Continuous-Integration/" style="font-size: 10px;">Continuous Integration</a> <a href="/tags/CrewAI/" style="font-size: 10px;">CrewAI</a> <a href="/tags/DIY/" style="font-size: 10px;">DIY</a> <a href="/tags/DLT/" style="font-size: 15.71px;">DLT</a> <a href="/tags/DNS/" style="font-size: 10px;">DNS</a> <a href="/tags/Data-Analytics/" style="font-size: 12.86px;">Data Analytics</a> <a href="/tags/Data-Integrity/" style="font-size: 14.29px;">Data Integrity</a> <a href="/tags/Data-Lineage/" style="font-size: 14.29px;">Data Lineage</a> <a href="/tags/Databricks/" style="font-size: 10px;">Databricks</a> <a href="/tags/Decryption/" style="font-size: 10px;">Decryption</a> <a href="/tags/DevOps/" style="font-size: 14.29px;">DevOps</a> <a href="/tags/Device-Shadow/" style="font-size: 10px;">Device Shadow</a> <a href="/tags/Distributed-Ledger-Technology/" style="font-size: 15.71px;">Distributed Ledger Technology</a> <a href="/tags/Docker/" style="font-size: 11.43px;">Docker</a> <a href="/tags/Domain/" style="font-size: 10px;">Domain</a> <a href="/tags/EC2/" style="font-size: 10px;">EC2</a> <a href="/tags/ECS-Anywhere/" style="font-size: 10px;">ECS Anywhere</a> <a href="/tags/Encoding/" style="font-size: 10px;">Encoding</a> <a href="/tags/Entra-ID/" style="font-size: 10px;">Entra ID</a> <a href="/tags/Fiddler/" style="font-size: 10px;">Fiddler</a> <a href="/tags/Fullnode/" style="font-size: 10px;">Fullnode</a> <a href="/tags/GPS/" style="font-size: 10px;">GPS</a> <a href="/tags/Game/" style="font-size: 10px;">Game</a> <a href="/tags/GenAI/" style="font-size: 12.86px;">GenAI</a> <a href="/tags/Generative-AI/" style="font-size: 12.86px;">Generative AI</a> <a href="/tags/Git/" style="font-size: 12.86px;">Git</a> <a href="/tags/Github/" style="font-size: 11.43px;">Github</a> <a href="/tags/Google-Analytics/" style="font-size: 10px;">Google Analytics</a> <a href="/tags/Google-Tag-Manager/" style="font-size: 10px;">Google Tag Manager</a> <a href="/tags/Grafana/" style="font-size: 10px;">Grafana</a> <a href="/tags/HTTPS/" style="font-size: 10px;">HTTPS</a> <a href="/tags/Hamster/" style="font-size: 10px;">Hamster</a> <a href="/tags/Hexo/" style="font-size: 11.43px;">Hexo</a> <a href="/tags/Home-Assistant/" style="font-size: 10px;">Home Assistant</a> <a href="/tags/IAM/" style="font-size: 11.43px;">IAM</a> <a href="/tags/IOTA/" style="font-size: 15.71px;">IOTA</a> <a href="/tags/Idp/" style="font-size: 10px;">Idp</a> <a href="/tags/Infrastructure-as-Code/" style="font-size: 10px;">Infrastructure as Code</a> <a href="/tags/IoT/" style="font-size: 20px;">IoT</a> <a href="/tags/Istio/" style="font-size: 10px;">Istio</a> <a href="/tags/Json/" style="font-size: 10px;">Json</a> <a href="/tags/Jump-start/" style="font-size: 10px;">Jump-start</a> <a href="/tags/Jupyter-Notebook/" style="font-size: 11.43px;">Jupyter Notebook</a> <a href="/tags/KUDU/" style="font-size: 10px;">KUDU</a> <a href="/tags/Kiali/" style="font-size: 10px;">Kiali</a> <a href="/tags/Kubernetes/" style="font-size: 10px;">Kubernetes</a> <a href="/tags/LLM/" style="font-size: 10px;">LLM</a> <a href="/tags/LangGraph/" style="font-size: 10px;">LangGraph</a> <a href="/tags/Linkedin/" style="font-size: 10px;">Linkedin</a> <a href="/tags/Llama/" style="font-size: 10px;">Llama</a> <a href="/tags/Load-Testing/" style="font-size: 10px;">Load Testing</a> <a href="/tags/MCP/" style="font-size: 10px;">MCP</a> <a href="/tags/Machine-Learning/" style="font-size: 11.43px;">Machine Learning</a> <a href="/tags/Managed-Identity/" style="font-size: 10px;">Managed Identity</a> <a href="/tags/Microsoft-language-understanding-intelligent-service/" style="font-size: 11.43px;">Microsoft language understanding intelligent service</a> <a href="/tags/Model-Context-Protocol/" style="font-size: 10px;">Model Context Protocol</a> <a href="/tags/Monitoring/" style="font-size: 12.86px;">Monitoring</a> <a href="/tags/Movie/" style="font-size: 10px;">Movie</a> <a href="/tags/Nano-Pi/" style="font-size: 10px;">Nano Pi</a> <a href="/tags/Native-App/" style="font-size: 10px;">Native App</a> <a href="/tags/Nodejs/" style="font-size: 10px;">Nodejs</a> <a href="/tags/OAuth/" style="font-size: 11.43px;">OAuth</a> <a href="/tags/OBD2/" style="font-size: 10px;">OBD2</a> <a href="/tags/Okta/" style="font-size: 10px;">Okta</a> <a href="/tags/OpenAI/" style="font-size: 10px;">OpenAI</a> <a href="/tags/OpenID/" style="font-size: 10px;">OpenID</a> <a href="/tags/Plugin/" style="font-size: 10px;">Plugin</a> <a href="/tags/Postman/" style="font-size: 10px;">Postman</a> <a href="/tags/PowerBI/" style="font-size: 12.86px;">PowerBI</a> <a href="/tags/Powershell/" style="font-size: 10px;">Powershell</a> <a href="/tags/Prototype/" style="font-size: 11.43px;">Prototype</a> <a href="/tags/Python/" style="font-size: 12.86px;">Python</a> <a href="/tags/Raspberry-Pi/" style="font-size: 12.86px;">Raspberry Pi</a> <a href="/tags/Release-Management/" style="font-size: 10px;">Release Management</a> <a href="/tags/Release-management/" style="font-size: 10px;">Release management</a> <a href="/tags/SSH/" style="font-size: 10px;">SSH</a> <a href="/tags/SSM/" style="font-size: 10px;">SSM</a> <a href="/tags/SSO/" style="font-size: 10px;">SSO</a> <a href="/tags/SVMP/" style="font-size: 10px;">SVMP</a> <a href="/tags/Scripting/" style="font-size: 10px;">Scripting</a> <a href="/tags/Security/" style="font-size: 10px;">Security</a> <a href="/tags/Service-mesh/" style="font-size: 10px;">Service mesh</a> <a href="/tags/SharePoint-PnP/" style="font-size: 10px;">SharePoint PnP</a> <a href="/tags/Social-Sharing/" style="font-size: 10px;">Social Sharing</a> <a href="/tags/Step-Functions/" style="font-size: 10px;">Step Functions</a> <a href="/tags/Tangle/" style="font-size: 14.29px;">Tangle</a> <a href="/tags/Tibber/" style="font-size: 10px;">Tibber</a> <a href="/tags/Time-Series-Insight-TSI/" style="font-size: 10px;">Time Series Insight (TSI)</a> <a href="/tags/Troubleshooting/" style="font-size: 11.43px;">Troubleshooting</a> <a href="/tags/VPC/" style="font-size: 10px;">VPC</a> <a href="/tags/VPC-Endpoint/" style="font-size: 10px;">VPC Endpoint</a> <a href="/tags/VSTS/" style="font-size: 12.86px;">VSTS</a> <a href="/tags/Vim/" style="font-size: 10px;">Vim</a> <a href="/tags/Visualization/" style="font-size: 10px;">Visualization</a> <a href="/tags/Web-Testing/" style="font-size: 10px;">Web Testing</a> <a href="/tags/Zigbee/" style="font-size: 10px;">Zigbee</a> <a href="/tags/e-paper/" style="font-size: 10px;">e-paper</a>
        </div>
    </div>

    
    <div id="toTop" class="fa fa-angle-up"></div>
</aside>
            
        </div>
        <footer id="footer">
    <div class="outer">
        <div id="footer-info" class="inner">
            &copy; 2025 Feng Lu<br>
            Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>. Theme by <a target="_blank" rel="noopener" href="http://github.com/ppoffice">PPOffice</a>
        </div>
    </div>
</footer>
        
    
    <script>
    var disqus_config = function () {
        
            this.page.url = 'https://feng.lu/2020/09/15/How-to-build-an-IoT-connected-car-Part-1-On-the-Edge/';
        
        this.page.identifier = 'How-to-build-an-IoT-connected-car-Part-1-On-the-Edge';
    };
    (function() { 
        var d = document, s = d.createElement('script');  
        s.src = '//' + 'linkcd' + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>



    
        
<script src="/libs/lightgallery/js/lightgallery.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-pager.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-zoom.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-hash.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-share.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-video.min.js"></script>

    
    
        
<script src="/libs/justified-gallery/jquery.justifiedGallery.min.js"></script>

    



<!-- Custom Scripts -->

<script src="/js/main.js"></script>


    </div>
</body>
</html>
