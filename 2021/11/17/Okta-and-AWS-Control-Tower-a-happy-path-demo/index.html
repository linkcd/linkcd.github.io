<!DOCTYPE html>
<html lang=en>
<head>

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-T85N4CJ');</script>
<!-- End Google Tag Manager -->

	
    <meta charset="utf-8">
    
    <title>Okta and AWS Control Tower - a happy path demo | feng.blog();</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="This is a happy path demo of setting up Okta as the Idp for AWS Control Tower (via AWS SSO). Goal: To utilize users and groups in Okta to manage AWS control tower.   1. Create a brand new Control Towe">
<meta property="og:type" content="article">
<meta property="og:title" content="Okta and AWS Control Tower - a happy path demo">
<meta property="og:url" content="https://feng.lu/2021/11/17/Okta-and-AWS-Control-Tower-a-happy-path-demo/index.html">
<meta property="og:site_name" content="feng.blog();">
<meta property="og:description" content="This is a happy path demo of setting up Okta as the Idp for AWS Control Tower (via AWS SSO). Goal: To utilize users and groups in Okta to manage AWS control tower.   1. Create a brand new Control Towe">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://feng.lu/2021/11/17/Okta-and-AWS-Control-Tower-a-happy-path-demo/title.jpg">
<meta property="og:image" content="https://feng.lu/2021/11/17/Okta-and-AWS-Control-Tower-a-happy-path-demo/default%20SSO%20user%20groups.jpg">
<meta property="og:image" content="https://feng.lu/2021/11/17/Okta-and-AWS-Control-Tower-a-happy-path-demo/default%20master%20user1.jpg">
<meta property="og:image" content="https://feng.lu/2021/11/17/Okta-and-AWS-Control-Tower-a-happy-path-demo/default%20master%20user2.jpg">
<meta property="og:image" content="https://feng.lu/2021/11/17/Okta-and-AWS-Control-Tower-a-happy-path-demo/default%20master%20user3.jpg">
<meta property="og:image" content="https://feng.lu/2021/11/17/Okta-and-AWS-Control-Tower-a-happy-path-demo/config%20saml2%20for%20aws%20sso.jpg">
<meta property="og:image" content="https://feng.lu/2021/11/17/Okta-and-AWS-Control-Tower-a-happy-path-demo/Config%20provisioning%20and%20other%20settings%20in%20AWS%20SSO.jpg">
<meta property="og:image" content="https://feng.lu/2021/11/17/Okta-and-AWS-Control-Tower-a-happy-path-demo/AWS%20SSO%20is%20now%20using%20Okta.jpg">
<meta property="og:image" content="https://feng.lu/2021/11/17/Okta-and-AWS-Control-Tower-a-happy-path-demo/identical%20groups%20as%20in%20AWS%20SSO%20are%20created%20in%20Okta.jpg">
<meta property="og:image" content="https://feng.lu/2021/11/17/Okta-and-AWS-Control-Tower-a-happy-path-demo/readonly%20user%20groups.jpg">
<meta property="og:image" content="https://feng.lu/2021/11/17/Okta-and-AWS-Control-Tower-a-happy-path-demo/test%20users.jpg">
<meta property="og:image" content="https://feng.lu/2021/11/17/Okta-and-AWS-Control-Tower-a-happy-path-demo/user%20groups%20in%20okta.jpg">
<meta property="og:image" content="https://feng.lu/2021/11/17/Okta-and-AWS-Control-Tower-a-happy-path-demo/no%20okta%20users%20yet.jpg">
<meta property="og:image" content="https://feng.lu/2021/11/17/Okta-and-AWS-Control-Tower-a-happy-path-demo/assign%20okta%20users%20to%20sso%20app.jpg">
<meta property="og:image" content="https://feng.lu/2021/11/17/Okta-and-AWS-Control-Tower-a-happy-path-demo/okta%20users%20now%20in%20sso.jpg">
<meta property="og:image" content="https://feng.lu/2021/11/17/Okta-and-AWS-Control-Tower-a-happy-path-demo/okta%20user%20detailed%20info.jpg">
<meta property="og:image" content="https://feng.lu/2021/11/17/Okta-and-AWS-Control-Tower-a-happy-path-demo/grant%20permission%20to%20okta%20user.jpg">
<meta property="og:image" content="https://feng.lu/2021/11/17/Okta-and-AWS-Control-Tower-a-happy-path-demo/missing%20okta%20group.jpg">
<meta property="og:image" content="https://feng.lu/2021/11/17/Okta-and-AWS-Control-Tower-a-happy-path-demo/push%20group%20rule.jpg">
<meta property="og:image" content="https://feng.lu/2021/11/17/Okta-and-AWS-Control-Tower-a-happy-path-demo/group%20push%20logs.jpg">
<meta property="og:image" content="https://feng.lu/2021/11/17/Okta-and-AWS-Control-Tower-a-happy-path-demo/okta%20groups%20available%20now.jpg">
<meta property="og:image" content="https://feng.lu/2021/11/17/Okta-and-AWS-Control-Tower-a-happy-path-demo/grant%20permission%20to%20groups.jpg">
<meta property="article:published_time" content="2021-11-17T19:17:08.000Z">
<meta property="article:modified_time" content="2025-03-28T09:05:16.881Z">
<meta property="article:author" content="Feng Lu">
<meta property="article:tag" content="AWS">
<meta property="article:tag" content="Okta">
<meta property="article:tag" content="AWS Control Tower">
<meta property="article:tag" content="AWS SSO">
<meta property="article:tag" content="SSO">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://feng.lu/2021/11/17/Okta-and-AWS-Control-Tower-a-happy-path-demo/title.jpg">
    

    
        <link rel="alternate" href="/atom.xml" title="feng.blog();" type="application/atom+xml" />
    

    
        <link rel="icon" href="/images/favicon.png" />
    

    
<link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">

    
<link rel="stylesheet" href="/libs/open-sans/styles.css">

    
<link rel="stylesheet" href="/libs/source-code-pro/styles.css">


    
<link rel="stylesheet" href="/css/style.css">


    
<script src="/libs/jquery/2.1.3/jquery.min.js"></script>

    
    
        
<link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">

    
    
        
<link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css">

    
    
    


<meta name="generator" content="Hexo 7.3.0"></head>

<body>
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T85N4CJ"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

    <div id="container">
        <header id="header">
    <div id="header-main" class="header-inner">
        <div class="outer">
            <a href="/" id="logo">
                <i class="logo"></i>
                <span class="site-title">feng.blog();</span>
            </a>
            <nav id="main-nav">
                
                    <a class="main-nav-link" href="/.">Home</a>
                
                    <a class="main-nav-link" href="/archives">Archives</a>
                
            </nav>
            
                
                <nav id="sub-nav">
                    <div class="profile" id="profile-nav">
                        <a id="profile-anchor" href="javascript:;">
                            <img class="avatar" src="/images/avatar.jpg" />
                            <i class="fa fa-caret-down"></i>
                        </a>
                    </div>
                </nav>
            
            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Search" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>

<script src="/js/insight.js"></script>


</div>
        </div>
    </div>
    <div id="main-nav-mobile" class="header-sub header-inner">
        <table class="menu outer">
            <tr>
                
                    <td><a class="main-nav-link" href="/.">Home</a></td>
                
                    <td><a class="main-nav-link" href="/archives">Archives</a></td>
                
                <td>
                    
    <div class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Search" />
    </div>

                </td>
            </tr>
        </table>
    </div>
</header>

        <div class="outer">
            
                

<aside id="profile">
    <div class="inner profile-inner">
        <div class="base-info profile-block">
            <img id="avatar" src="/images/avatar.jpg" />
            <h2 id="name">Feng Lu</h2>
            <h3 id="title">Builder, Speaker, Architect and Technical Evangelist</h3>
            <span id="location"><i class="fa fa-map-marker"></i>Oslo Area, Norway</span>
        </div>
        <div class="article-info profile-block">
            <div class="article-info-block">
                39
                <span>posts</span>
            </div>
            <div class="article-info-block">
                129
                <span>tags</span>
            </div>
        </div>
        
        <div class="profile-block social-links">
            <table>
                <tr>
                    
                    
                    <td>
                        <a href="https://www.linkedin.com/in/linkcd" target="_blank" title="linkedin" class=tooltip>
                            <i class="fa fa-linkedin"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="https://github.com/linkcd" target="_blank" title="github" class=tooltip>
                            <i class="fa fa-github"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="/atom.xml" target="_blank" title="rss" class=tooltip>
                            <i class="fa fa-rss"></i>
                        </a>
                    </td>
                    
                </tr>
            </table>
        </div>
        
    </div>
</aside>

            
            <section id="main"><article id="post-Okta-and-AWS-Control-Tower-a-happy-path-demo" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 class="article-title" itemprop="name">
            Okta and AWS Control Tower - a happy path demo
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2021/11/17/Okta-and-AWS-Control-Tower-a-happy-path-demo/">
            <time datetime="2021-11-17T19:17:08.000Z" itemprop="datePublished">2021-11-17</time>
        </a>
    </div>


                        
                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link-link" href="/tags/AWS/" rel="tag">AWS</a>, <a class="tag-link-link" href="/tags/AWS-Control-Tower/" rel="tag">AWS Control Tower</a>, <a class="tag-link-link" href="/tags/AWS-SSO/" rel="tag">AWS SSO</a>, <a class="tag-link-link" href="/tags/Okta/" rel="tag">Okta</a>, <a class="tag-link-link" href="/tags/SSO/" rel="tag">SSO</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <p>This is a <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Happy_path">happy path</a> demo of setting up <a target="_blank" rel="noopener" href="https://www.okta.com/">Okta</a> as the Idp for <a target="_blank" rel="noopener" href="https://aws.amazon.com/controltower/">AWS Control Tower</a> (via <a target="_blank" rel="noopener" href="https://aws.amazon.com/single-sign-on/">AWS SSO</a>). <br><strong>Goal</strong>: To utilize users and groups in Okta to manage AWS control tower.</p>
<img src="/2021/11/17/Okta-and-AWS-Control-Tower-a-happy-path-demo/title.jpg" class="" title>

<h1 id="1-Create-a-brand-new-Control-Tower-instance"><a href="#1-Create-a-brand-new-Control-Tower-instance" class="headerlink" title="1. Create a brand new Control Tower instance"></a>1. Create a brand new Control Tower instance</h1><p>In this demo, we create the AWS Control Tower instance in a brand new AWS account. During this process, control tower creates several services&#x2F;components, such as AWS Organizations, AWS SSO, default organizations unit (OU) “Security” and 2 AWS accounts “Log Archive” and “Audit”. </p>
<p>In the AWS SSO, some default SSO user groups are created for managing Control Tower:</p>
<img src="/2021/11/17/Okta-and-AWS-Control-Tower-a-happy-path-demo/default%20SSO%20user%20groups.jpg" class="" title="default SSO user groups">

<p>The default admin user for organization management account is “AWS Control Tower Admin”.</p>
<img src="/2021/11/17/Okta-and-AWS-Control-Tower-a-happy-path-demo/default%20master%20user1.jpg" class="" title="default master user1">

<p>Detailed user info</p>
<img src="/2021/11/17/Okta-and-AWS-Control-Tower-a-happy-path-demo/default%20master%20user2.jpg" class="" title="default master user2">

<p>And it belongs to 2 groups: <strong>AWSAccountFactory</strong> and <strong>AWSControlTowerAdmins</strong></p>
<img src="/2021/11/17/Okta-and-AWS-Control-Tower-a-happy-path-demo/default%20master%20user3.jpg" class="" title="default master user3">

<span id="more"></span>

<h1 id="2-Setup-Okta-and-use-it-as-the-idp-of-AWS-SSO"><a href="#2-Setup-Okta-and-use-it-as-the-idp-of-AWS-SSO" class="headerlink" title="2. Setup Okta and use it as the idp of AWS SSO"></a>2. Setup Okta and use it as the idp of AWS SSO</h1><h2 id="2-1-Create-an-environment-of-Okta"><a href="#2-1-Create-an-environment-of-Okta" class="headerlink" title="2.1 Create an environment of Okta]"></a>2.1 Create an environment of Okta]</h2><p>For this demo, we are using a <a target="_blank" rel="noopener" href="https://developer.okta.com/signup/">free developer plan of Okta</a>.</p>
<h2 id="2-2-Setup-Okta-as-the-idp-of-AWS-SSO"><a href="#2-2-Setup-Okta-as-the-idp-of-AWS-SSO" class="headerlink" title="2.2 Setup Okta as the idp of AWS SSO"></a>2.2 Setup Okta as the idp of AWS SSO</h2><p>Follow the steps in the following document, to use Okta as the idp of AWS SSO.<br><strong>Note that you need to check steps from <em>both</em> documentation to make sure the integration and user provisioning works.</strong></p>
<h3 id="2-2-1-Basic-hand-shake-import-metadata-file-from-Okta-to-AWS-SSO"><a href="#2-2-1-Basic-hand-shake-import-metadata-file-from-Okta-to-AWS-SSO" class="headerlink" title="2.2.1 Basic hand-shake, import metadata file from Okta to AWS SSO"></a>2.2.1 Basic hand-shake, import metadata file from Okta to AWS SSO</h3><p><strong>Steps</strong>: <a target="_blank" rel="noopener" href="https://saml-doc.okta.com/SAML_Docs/How-to-Configure-SAML-2.0-for-AWS-Single-Sign-on.html">How to Configure SAML 2.0 for AWS Single Sign-on</a></p>
<img src="/2021/11/17/Okta-and-AWS-Control-Tower-a-happy-path-demo/config%20saml2%20for%20aws%20sso.jpg" class="" title="config saml2 for aws sso">

<h3 id="2-2-2-Config-provisioning-and-other-settings-in-AWS-SSO"><a href="#2-2-2-Config-provisioning-and-other-settings-in-AWS-SSO" class="headerlink" title="2.2.2 Config provisioning and other settings in AWS SSO"></a>2.2.2 Config provisioning and other settings in AWS SSO</h3><p><strong>Steps</strong>: <a target="_blank" rel="noopener" href="https://docs.aws.amazon.com/singlesignon/latest/userguide/okta-idp.html">Configure provisioning for Okta in AWS SSO</a>        </p>
<img src="/2021/11/17/Okta-and-AWS-Control-Tower-a-happy-path-demo/Config%20provisioning%20and%20other%20settings%20in%20AWS%20SSO.jpg" class="" title="Config provisioning and other settings in AWS SSO">

<h2 id="2-3-The-basic-setup-is-ready-but-not-for-users-and-groups-yet"><a href="#2-3-The-basic-setup-is-ready-but-not-for-users-and-groups-yet" class="headerlink" title="2.3 The basic setup is ready, but not for users and groups yet"></a>2.3 The basic setup is ready, but not for users and groups yet</h2><p>After the basic hand-shake between AWS SSO and Okta, the AWS SSO is now using Okta.</p>
<img src="/2021/11/17/Okta-and-AWS-Control-Tower-a-happy-path-demo/AWS%20SSO%20is%20now%20using%20Okta.jpg" class="" title="AWS SSO is now using Okta">

<p>In Okta groups UI, you can see identical groups as in AWS SSO are created in Okta. The <strong>Everyone</strong> is a default Okta user group.</p>
<img src="/2021/11/17/Okta-and-AWS-Control-Tower-a-happy-path-demo/identical%20groups%20as%20in%20AWS%20SSO%20are%20created%20in%20Okta.jpg" class="" title="identical groups as in AWS SSO are created in Okta">

<p><strong>Note</strong>: you <strong>cannot</strong> add&#x2F;remove users to it, as it says “This group is managed automatically by Okta, so you cannot edit it or modify its membership.”</p>
<img src="/2021/11/17/Okta-and-AWS-Control-Tower-a-happy-path-demo/readonly%20user%20groups.jpg" class="" title="readonly user groups">

<h1 id="3-Setup-Okta-users-and-groups-push-them-to-AWS-SSO"><a href="#3-Setup-Okta-users-and-groups-push-them-to-AWS-SSO" class="headerlink" title="3. Setup Okta users and groups, push them to AWS SSO"></a>3. Setup Okta users and groups, push them to AWS SSO</h1><h2 id="3-1-Create-user-and-groups-in-Okta"><a href="#3-1-Create-user-and-groups-in-Okta" class="headerlink" title="3.1 Create user and groups in Okta"></a>3.1 Create user and groups in Okta</h2><p>Lets create some test users:</p>
<img src="/2021/11/17/Okta-and-AWS-Control-Tower-a-happy-path-demo/test%20users.jpg" class="" title="test users">

<p>We also create user groups in Okta</p>
<ul>
<li><strong>AWS-CT-Admin-Okta-Group</strong>, has 1 user: <strong>Feng</strong> </li>
<li><strong>AWS-CT-Developers-Okta-Group</strong> has 2 users: <strong>Alice</strong> and <strong>Bob</strong></li>
</ul>
<img src="/2021/11/17/Okta-and-AWS-Control-Tower-a-happy-path-demo/user%20groups%20in%20okta.jpg" class="" title="user groups in okta">

<p>However, they are not appearing in AWS SSO user list. There is still no Okta user nor Okta group.</p>
<img src="/2021/11/17/Okta-and-AWS-Control-Tower-a-happy-path-demo/no%20okta%20users%20yet.jpg" class="" title="no okta users yet">

<p>In order to user the users from Okta, these users need to be assigned to <strong>AWS SSO Application</strong> in Okta.</p>
<h2 id="3-2-Assign-users-and-or-groups-in-Okta"><a href="#3-2-Assign-users-and-or-groups-in-Okta" class="headerlink" title="3.2 Assign users and&#x2F;or groups in Okta"></a>3.2 Assign users and&#x2F;or groups in Okta</h2><p>Go to Okta -&gt; Application -&gt; AWS SSO, in <strong>Assignments</strong> tab, you can either assign individual users or user groups. In this screenshot, all users are assigned to AWS SSO via Group (see the <strong>Type</strong> column).</p>
<img src="/2021/11/17/Okta-and-AWS-Control-Tower-a-happy-path-demo/assign%20okta%20users%20to%20sso%20app.jpg" class="" title="assign okta users to sso app">

<p>Soon, you can see these 3 users appear in AWS SSO interface.</p>
<img src="/2021/11/17/Okta-and-AWS-Control-Tower-a-happy-path-demo/okta%20users%20now%20in%20sso.jpg" class="" title="okta users now in sso">

<p>The detailed info. Note that it was created and updated by <strong>SCIM</strong>.</p>
<img src="/2021/11/17/Okta-and-AWS-Control-Tower-a-happy-path-demo/okta%20user%20detailed%20info.jpg" class="" title="okta user detailed info">

<p>Now you can assign them into AWS account, so the user can login to AWS console via login to Okta.</p>
<img src="/2021/11/17/Okta-and-AWS-Control-Tower-a-happy-path-demo/grant%20permission%20to%20okta%20user.jpg" class="" title="grant permission to okta user">

<h2 id="3-3-Push-groups-from-Okta-to-AWS-SSO"><a href="#3-3-Push-groups-from-Okta-to-AWS-SSO" class="headerlink" title="3.3 Push groups from Okta to AWS SSO"></a>3.3 Push groups from Okta to AWS SSO</h2><p>Now we can grant permission for individual Okta users. But how about Okta group? These new okta groups are not available in AWS SSO yet. And the groups with identical names from AWS SSO is not helping, as we cannot add users into it.</p>
<img src="/2021/11/17/Okta-and-AWS-Control-Tower-a-happy-path-demo/missing%20okta%20group.jpg" class="" title="missing okta group">

<p>To solve this, we need to push the Okta groups to AWS SSO by setting up the “<strong>Push Groups</strong>”.</p>
<p>Go Okta &gt; Application &gt; AWS SSO, in tab “<strong>Push Groups</strong>”, here you can push group by name, or setup roles for batch pushing.</p>
<p>In this demo, we setup a rule named “Pust-AWS-Related-Groups” for pushing any group that starts with “<strong>AWS-</strong>”</p>
<img src="/2021/11/17/Okta-and-AWS-Control-Tower-a-happy-path-demo/push%20group%20rule.jpg" class="" title="push group rule">

<p>Soon, these groups were pushed to AWS SSO:</p>
<img src="/2021/11/17/Okta-and-AWS-Control-Tower-a-happy-path-demo/group%20push%20logs.jpg" class="" title="group push logs">

<img src="/2021/11/17/Okta-and-AWS-Control-Tower-a-happy-path-demo/okta%20groups%20available%20now.jpg" class="" title="okta groups available now">

<p>Now you can also grant permission to groups, such as every Okta user in <strong>AWS-CT-Admin-Okta-Group</strong> now have permission as AWS control tower admin.</p>
<img src="/2021/11/17/Okta-and-AWS-Control-Tower-a-happy-path-demo/grant%20permission%20to%20groups.jpg" class="" title="grant permission to groups">

<p>EoF.</p>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="https://feng.lu/2021/11/17/Okta-and-AWS-Control-Tower-a-happy-path-demo/" data-id="cm8t2lr2b001f08ndbksu4515" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    
        <a href="https://feng.lu/2021/11/17/Okta-and-AWS-Control-Tower-a-happy-path-demo/#comments" class="article-comment-link disqus-comment-count" data-disqus-url="https://feng.lu/2021/11/17/Okta-and-AWS-Control-Tower-a-happy-path-demo/">Comments</a>
    

        </footer>
    </div>
    
        
<nav id="article-nav">
    
        <a href="/2021/12/04/Building-a-Very-Slow-Movie-Player/" id="article-nav-newer" class="article-nav-link-wrap">
            <strong class="article-nav-caption">Newer</strong>
            <div class="article-nav-title">
                
                    Building a Very Slow Movie Player
                
            </div>
        </a>
    
    
        <a href="/2020/09/22/How-to-build-an-IoT-connected-car-Part-2-Data-Analytics-in-the-Cloud/" id="article-nav-older" class="article-nav-link-wrap">
            <strong class="article-nav-caption">Older</strong>
            <div class="article-nav-title">How to build an IoT connected car - Part 2: Data Analytics in the Cloud</div>
        </a>
    
</nav>


    
</article>


    
    <section id="comments">
    
        
    <div id="disqus_thread">
        <noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>

    
    </section>

</section>
            
                <aside id="sidebar">
   
        
    <div class="widget-wrap">
        <h3 class="widget-title">recent</h3>
        <div class="widget">
            <ul id="recent-post" class="no-thumbnail">
                
                    <li>
                        
                        <div class="item-inner">
                            <p class="item-category"></p>
                            <p class="item-title"><a href="/2025/03/28/Building-a-Tibber-MCP-Server-Connect-Your-AI-Agent-to-Energy-Consumption-Data/" class="title">Building a Tibber MCP Server: Connect Your AI Agent to Energy Consumption Data</a></p>
                            <p class="item-date"><time datetime="2025-03-28T13:25:48.000Z" itemprop="datePublished">2025-03-28</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-inner">
                            <p class="item-category"></p>
                            <p class="item-title"><a href="/2024/12/03/Build-a-Multi-Agent-System-to-Discover-the-Top-AI-Model-for-Rock-Paper-Scissors-Games/" class="title">Build a Multi-Agent System to Discover the Top AI Model for Rock-Paper-Scissors Games</a></p>
                            <p class="item-date"><time datetime="2024-12-03T15:21:40.000Z" itemprop="datePublished">2024-12-03</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-inner">
                            <p class="item-category"></p>
                            <p class="item-title"><a href="/2024/09/18/How-to-secretless-access-Azure-and-AWS-resources-with-Azure-managed-identity-and-AWS-IAM/" class="title">Implementing Secret-less Access to Azure and AWS with Azure Managed Identities and AWS IAM</a></p>
                            <p class="item-date"><time datetime="2024-09-18T12:49:21.000Z" itemprop="datePublished">2024-09-18</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-inner">
                            <p class="item-category"></p>
                            <p class="item-title"><a href="/2024/07/04/AWS-Blog-Build-your-multilingual-personal-calendar-assistant-with-Amazon-Bedrock-and-AWS-Step-Functions/" class="title">AWS Blog - Build your multilingual personal calendar assistant with Amazon Bedrock and AWS Step Functions</a></p>
                            <p class="item-date"><time datetime="2024-07-04T08:50:24.000Z" itemprop="datePublished">2024-07-04</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-inner">
                            <p class="item-category"></p>
                            <p class="item-title"><a href="/2023/05/23/Manage-IoT-device-state-anywhere-using-AWS-IoT-services/" class="title">AWS Blog - Manage IoT device state anywhere using AWS IoT Device Shadow service and AWS IoT Greengrass</a></p>
                            <p class="item-date"><time datetime="2023-05-23T08:34:20.000Z" itemprop="datePublished">2023-05-23</time></p>
                        </div>
                    </li>
                
            </ul>
        </div>
    </div>

    
        
    
        
    <div class="widget-wrap">
        <h3 class="widget-title">archives</h3>
        <div class="widget">
            <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/03/">March 2025</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/12/">December 2024</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/09/">September 2024</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/07/">July 2024</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/05/">May 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">February 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">December 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">November 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">January 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">November 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">October 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">September 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">August 2016</a><span class="archive-list-count">3</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">tag cloud</h3>
        <div class="widget tagcloud">
            <a href="/tags/ADFS/" style="font-size: 10px;">ADFS</a> <a href="/tags/AI/" style="font-size: 12.86px;">AI</a> <a href="/tags/AI-Agent/" style="font-size: 12.86px;">AI Agent</a> <a href="/tags/API/" style="font-size: 10px;">API</a> <a href="/tags/ASP-Net-Core/" style="font-size: 10px;">ASP.Net Core</a> <a href="/tags/AWS/" style="font-size: 17.14px;">AWS</a> <a href="/tags/AWS-Control-Tower/" style="font-size: 10px;">AWS Control Tower</a> <a href="/tags/AWS-IoT-Core/" style="font-size: 10px;">AWS IoT Core</a> <a href="/tags/AWS-IoT-Greengrass/" style="font-size: 10px;">AWS IoT Greengrass</a> <a href="/tags/AWS-SSO/" style="font-size: 10px;">AWS SSO</a> <a href="/tags/AWS-Step-Functions/" style="font-size: 10px;">AWS Step Functions</a> <a href="/tags/AWS-Systems-Manager/" style="font-size: 10px;">AWS Systems Manager</a> <a href="/tags/Agent/" style="font-size: 10px;">Agent</a> <a href="/tags/Amazon-Bedrock/" style="font-size: 10px;">Amazon Bedrock</a> <a href="/tags/Amazon-Lookout-for-Vision/" style="font-size: 10px;">Amazon Lookout for Vision</a> <a href="/tags/Application-Insights/" style="font-size: 12.86px;">Application Insights</a> <a href="/tags/Artificial-Intelligence/" style="font-size: 11.43px;">Artificial Intelligence</a> <a href="/tags/Authentication/" style="font-size: 10px;">Authentication</a> <a href="/tags/Authorization/" style="font-size: 10px;">Authorization</a> <a href="/tags/Azure/" style="font-size: 18.57px;">Azure</a> <a href="/tags/Azure-AD-B2C/" style="font-size: 10px;">Azure AD B2C</a> <a href="/tags/Azure-Data-Explorer-ADX/" style="font-size: 10px;">Azure Data Explorer (ADX)</a> <a href="/tags/Azure-IoT-Edge/" style="font-size: 10px;">Azure IoT Edge</a> <a href="/tags/Azure-IoT-Hub/" style="font-size: 10px;">Azure IoT Hub</a> <a href="/tags/Azure-Template/" style="font-size: 10px;">Azure Template</a> <a href="/tags/Blockchain/" style="font-size: 10px;">Blockchain</a> <a href="/tags/Blog/" style="font-size: 12.86px;">Blog</a> <a href="/tags/Build/" style="font-size: 11.43px;">Build</a> <a href="/tags/Car/" style="font-size: 11.43px;">Car</a> <a href="/tags/Chatbot/" style="font-size: 11.43px;">Chatbot</a> <a href="/tags/Claude/" style="font-size: 10px;">Claude</a> <a href="/tags/Continuous-Deployment/" style="font-size: 10px;">Continuous Deployment</a> <a href="/tags/Continuous-Integration/" style="font-size: 10px;">Continuous Integration</a> <a href="/tags/CrewAI/" style="font-size: 10px;">CrewAI</a> <a href="/tags/DIY/" style="font-size: 10px;">DIY</a> <a href="/tags/DLT/" style="font-size: 15.71px;">DLT</a> <a href="/tags/DNS/" style="font-size: 10px;">DNS</a> <a href="/tags/Data-Analytics/" style="font-size: 12.86px;">Data Analytics</a> <a href="/tags/Data-Integrity/" style="font-size: 14.29px;">Data Integrity</a> <a href="/tags/Data-Lineage/" style="font-size: 14.29px;">Data Lineage</a> <a href="/tags/Databricks/" style="font-size: 10px;">Databricks</a> <a href="/tags/Decryption/" style="font-size: 10px;">Decryption</a> <a href="/tags/DevOps/" style="font-size: 14.29px;">DevOps</a> <a href="/tags/Device-Shadow/" style="font-size: 10px;">Device Shadow</a> <a href="/tags/Distributed-Ledger-Technology/" style="font-size: 15.71px;">Distributed Ledger Technology</a> <a href="/tags/Docker/" style="font-size: 11.43px;">Docker</a> <a href="/tags/Domain/" style="font-size: 10px;">Domain</a> <a href="/tags/EC2/" style="font-size: 10px;">EC2</a> <a href="/tags/ECS-Anywhere/" style="font-size: 10px;">ECS Anywhere</a> <a href="/tags/Encoding/" style="font-size: 10px;">Encoding</a> <a href="/tags/Entra-ID/" style="font-size: 10px;">Entra ID</a> <a href="/tags/Fiddler/" style="font-size: 10px;">Fiddler</a> <a href="/tags/Fullnode/" style="font-size: 10px;">Fullnode</a> <a href="/tags/GPS/" style="font-size: 10px;">GPS</a> <a href="/tags/Game/" style="font-size: 10px;">Game</a> <a href="/tags/GenAI/" style="font-size: 12.86px;">GenAI</a> <a href="/tags/Generative-AI/" style="font-size: 12.86px;">Generative AI</a> <a href="/tags/Git/" style="font-size: 12.86px;">Git</a> <a href="/tags/Github/" style="font-size: 11.43px;">Github</a> <a href="/tags/Google-Analytics/" style="font-size: 10px;">Google Analytics</a> <a href="/tags/Google-Tag-Manager/" style="font-size: 10px;">Google Tag Manager</a> <a href="/tags/Grafana/" style="font-size: 10px;">Grafana</a> <a href="/tags/HTTPS/" style="font-size: 10px;">HTTPS</a> <a href="/tags/Hamster/" style="font-size: 10px;">Hamster</a> <a href="/tags/Hexo/" style="font-size: 11.43px;">Hexo</a> <a href="/tags/Home-Assistant/" style="font-size: 10px;">Home Assistant</a> <a href="/tags/IAM/" style="font-size: 11.43px;">IAM</a> <a href="/tags/IOTA/" style="font-size: 15.71px;">IOTA</a> <a href="/tags/Idp/" style="font-size: 10px;">Idp</a> <a href="/tags/Infrastructure-as-Code/" style="font-size: 10px;">Infrastructure as Code</a> <a href="/tags/IoT/" style="font-size: 20px;">IoT</a> <a href="/tags/Istio/" style="font-size: 10px;">Istio</a> <a href="/tags/Json/" style="font-size: 10px;">Json</a> <a href="/tags/Jump-start/" style="font-size: 10px;">Jump-start</a> <a href="/tags/Jupyter-Notebook/" style="font-size: 11.43px;">Jupyter Notebook</a> <a href="/tags/KUDU/" style="font-size: 10px;">KUDU</a> <a href="/tags/Kiali/" style="font-size: 10px;">Kiali</a> <a href="/tags/Kubernetes/" style="font-size: 10px;">Kubernetes</a> <a href="/tags/LLM/" style="font-size: 10px;">LLM</a> <a href="/tags/LangGraph/" style="font-size: 10px;">LangGraph</a> <a href="/tags/Linkedin/" style="font-size: 10px;">Linkedin</a> <a href="/tags/Llama/" style="font-size: 10px;">Llama</a> <a href="/tags/Load-Testing/" style="font-size: 10px;">Load Testing</a> <a href="/tags/MCP/" style="font-size: 10px;">MCP</a> <a href="/tags/Machine-Learning/" style="font-size: 11.43px;">Machine Learning</a> <a href="/tags/Managed-Identity/" style="font-size: 10px;">Managed Identity</a> <a href="/tags/Microsoft-language-understanding-intelligent-service/" style="font-size: 11.43px;">Microsoft language understanding intelligent service</a> <a href="/tags/Model-Context-Protocol/" style="font-size: 10px;">Model Context Protocol</a> <a href="/tags/Monitoring/" style="font-size: 12.86px;">Monitoring</a> <a href="/tags/Movie/" style="font-size: 10px;">Movie</a> <a href="/tags/Nano-Pi/" style="font-size: 10px;">Nano Pi</a> <a href="/tags/Native-App/" style="font-size: 10px;">Native App</a> <a href="/tags/Nodejs/" style="font-size: 10px;">Nodejs</a> <a href="/tags/OAuth/" style="font-size: 11.43px;">OAuth</a> <a href="/tags/OBD2/" style="font-size: 10px;">OBD2</a> <a href="/tags/Okta/" style="font-size: 10px;">Okta</a> <a href="/tags/OpenAI/" style="font-size: 10px;">OpenAI</a> <a href="/tags/OpenID/" style="font-size: 10px;">OpenID</a> <a href="/tags/Plugin/" style="font-size: 10px;">Plugin</a> <a href="/tags/Postman/" style="font-size: 10px;">Postman</a> <a href="/tags/PowerBI/" style="font-size: 12.86px;">PowerBI</a> <a href="/tags/Powershell/" style="font-size: 10px;">Powershell</a> <a href="/tags/Prototype/" style="font-size: 11.43px;">Prototype</a> <a href="/tags/Python/" style="font-size: 12.86px;">Python</a> <a href="/tags/Raspberry-Pi/" style="font-size: 12.86px;">Raspberry Pi</a> <a href="/tags/Release-Management/" style="font-size: 10px;">Release Management</a> <a href="/tags/Release-management/" style="font-size: 10px;">Release management</a> <a href="/tags/SSH/" style="font-size: 10px;">SSH</a> <a href="/tags/SSM/" style="font-size: 10px;">SSM</a> <a href="/tags/SSO/" style="font-size: 10px;">SSO</a> <a href="/tags/SVMP/" style="font-size: 10px;">SVMP</a> <a href="/tags/Scripting/" style="font-size: 10px;">Scripting</a> <a href="/tags/Security/" style="font-size: 10px;">Security</a> <a href="/tags/Service-mesh/" style="font-size: 10px;">Service mesh</a> <a href="/tags/SharePoint-PnP/" style="font-size: 10px;">SharePoint PnP</a> <a href="/tags/Social-Sharing/" style="font-size: 10px;">Social Sharing</a> <a href="/tags/Step-Functions/" style="font-size: 10px;">Step Functions</a> <a href="/tags/Tangle/" style="font-size: 14.29px;">Tangle</a> <a href="/tags/Tibber/" style="font-size: 10px;">Tibber</a> <a href="/tags/Time-Series-Insight-TSI/" style="font-size: 10px;">Time Series Insight (TSI)</a> <a href="/tags/Troubleshooting/" style="font-size: 11.43px;">Troubleshooting</a> <a href="/tags/VPC/" style="font-size: 10px;">VPC</a> <a href="/tags/VPC-Endpoint/" style="font-size: 10px;">VPC Endpoint</a> <a href="/tags/VSTS/" style="font-size: 12.86px;">VSTS</a> <a href="/tags/Vim/" style="font-size: 10px;">Vim</a> <a href="/tags/Visualization/" style="font-size: 10px;">Visualization</a> <a href="/tags/Web-Testing/" style="font-size: 10px;">Web Testing</a> <a href="/tags/Zigbee/" style="font-size: 10px;">Zigbee</a> <a href="/tags/e-paper/" style="font-size: 10px;">e-paper</a>
        </div>
    </div>

    
    <div id="toTop" class="fa fa-angle-up"></div>
</aside>
            
        </div>
        <footer id="footer">
    <div class="outer">
        <div id="footer-info" class="inner">
            &copy; 2025 Feng Lu<br>
            Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>. Theme by <a target="_blank" rel="noopener" href="http://github.com/ppoffice">PPOffice</a>
        </div>
    </div>
</footer>
        
    
    <script>
    var disqus_config = function () {
        
            this.page.url = 'https://feng.lu/2021/11/17/Okta-and-AWS-Control-Tower-a-happy-path-demo/';
        
        this.page.identifier = 'Okta-and-AWS-Control-Tower-a-happy-path-demo';
    };
    (function() { 
        var d = document, s = d.createElement('script');  
        s.src = '//' + 'linkcd' + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>



    
        
<script src="/libs/lightgallery/js/lightgallery.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-pager.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-zoom.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-hash.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-share.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-video.min.js"></script>

    
    
        
<script src="/libs/justified-gallery/jquery.justifiedGallery.min.js"></script>

    



<!-- Custom Scripts -->

<script src="/js/main.js"></script>


    </div>
</body>
</html>
